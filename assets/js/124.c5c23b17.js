(window.webpackJsonp=window.webpackJsonp||[]).push([[124],{484:function(s,e,t){"use strict";t.r(e);var a=t(8),v=Object(a.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("blockquote",[e("p",[s._v("å•æœºçš„Rediså­˜åœ¨å››å¤§é—®é¢˜ï¼š\n"),e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Cynicism-lab/MyResource@gh-pages/image/image-20210725144240631.6n735l8wxj7k.webp",alt:""}})])]),s._v(" "),e("h2",{attrs:{id:"_1-redisæŒä¹…åŒ–"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-redisæŒä¹…åŒ–"}},[s._v("#")]),s._v(" 1. RedisæŒä¹…åŒ–")]),s._v(" "),e("h3",{attrs:{id:"_1-1-rdbæŒä¹…åŒ–"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-rdbæŒä¹…åŒ–"}},[s._v("#")]),s._v(" 1.1 RDBæŒä¹…åŒ–")]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("æç¤º")]),s._v(" "),e("p",[s._v("RDBå…¨ç§°Redis Database Backup fileï¼ˆRedisæ•°æ®å¤‡ä»½æ–‡ä»¶ï¼‰ï¼Œä¹Ÿè¢«å«åšRedisæ•°æ®å¿«ç…§ã€‚ç®€å•æ¥è¯´å°±æ˜¯æŠŠå†…å­˜ä¸­çš„æ‰€æœ‰æ•°æ®éƒ½è®°å½•åˆ°ç£ç›˜ä¸­ã€‚å½“Rediså®ä¾‹æ•…éšœé‡å¯åï¼Œä»ç£ç›˜è¯»å–å¿«ç…§æ–‡ä»¶ï¼Œæ¢å¤æ•°æ®ã€‚å¿«ç…§æ–‡ä»¶ç§°ä¸ºRDBæ–‡ä»¶ï¼Œé»˜è®¤æ˜¯ä¿å­˜åœ¨å½“å‰è¿è¡Œç›®å½•ã€‚")])]),s._v(" "),e("h4",{attrs:{id:"_1-1-1-æ‰§è¡Œæ—¶æœº"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-1-æ‰§è¡Œæ—¶æœº"}},[s._v("#")]),s._v(" 1.1.1 æ‰§è¡Œæ—¶æœº")]),s._v(" "),e("p",[s._v("RDBæŒä¹…åŒ–åœ¨å››ç§æƒ…å†µä¸‹ä¼šæ‰§è¡Œï¼š")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("æ‰§è¡Œsaveå‘½ä»¤")]),s._v(": saveå‘½ä»¤ä¼šå¯¼è‡´"),e("strong",[s._v("ä¸»è¿›ç¨‹")]),s._v("æ‰§è¡ŒRDBï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­å…¶å®ƒæ‰€æœ‰å‘½ä»¤éƒ½ä¼šè¢«é˜»å¡ã€‚åªæœ‰åœ¨æ•°æ®è¿ç§»æ—¶å¯èƒ½ç”¨åˆ°")]),s._v(" "),e("li",[e("strong",[s._v("æ‰§è¡Œbgsaveå‘½ä»¤")]),s._v(": è¿™ä¸ªå‘½ä»¤æ‰§è¡Œåä¼šå¼€å¯"),e("strong",[s._v("ç‹¬ç«‹è¿›ç¨‹")]),s._v("å®ŒæˆRDBï¼Œä¸»è¿›ç¨‹å¯ä»¥æŒç»­å¤„ç†ç”¨æˆ·è¯·æ±‚ï¼Œä¸å—å½±å“")]),s._v(" "),e("li",[e("strong",[s._v("Redisåœæœºæ—¶")]),s._v(": Redisåœæœºæ—¶ä¼šæ‰§è¡Œä¸€æ¬¡saveå‘½ä»¤ï¼Œå®ç°RDBæŒä¹…åŒ–")]),s._v(" "),e("li",[e("strong",[s._v("è§¦å‘RDBæ¡ä»¶æ—¶")]),s._v(": Rediså†…éƒ¨æœ‰è§¦å‘RDBçš„æœºåˆ¶")])]),s._v(" "),e("h4",{attrs:{id:"_1-1-2-rdbåŸç†"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-2-rdbåŸç†"}},[s._v("#")]),s._v(" 1.1.2 RDBåŸç†")]),s._v(" "),e("blockquote",[e("p",[s._v("bgsaveå¼€å§‹æ—¶ä¼šforkä¸»è¿›ç¨‹å¾—åˆ°å­è¿›ç¨‹ï¼Œå­è¿›ç¨‹å…±äº«ä¸»è¿›ç¨‹çš„å†…å­˜æ•°æ®ã€‚å®Œæˆforkåè¯»å–å†…å­˜æ•°æ®å¹¶å†™å…¥ RDB æ–‡ä»¶ã€‚")])]),s._v(" "),e("p",[s._v("forké‡‡ç”¨çš„æ˜¯copy-on-writeæŠ€æœ¯ï¼š")]),s._v(" "),e("ul",[e("li",[s._v("å½“ä¸»è¿›ç¨‹æ‰§è¡Œè¯»æ“ä½œæ—¶ï¼Œè®¿é—®å…±äº«å†…å­˜ï¼›")]),s._v(" "),e("li",[s._v("å½“ä¸»è¿›ç¨‹æ‰§è¡Œå†™æ“ä½œæ—¶ï¼Œåˆ™ä¼šæ‹·è´ä¸€ä»½æ•°æ®ï¼Œæ‰§è¡Œå†™æ“ä½œã€‚")])]),s._v(" "),e("p",[e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Cynicism-lab/MyResource@gh-pages/image/image-20210725151319695.4s5u01lxqj28.webp",alt:""}})]),s._v(" "),e("p",[s._v("ğŸ” RDBçš„ç¼ºç‚¹ï¼Ÿ")]),s._v(" "),e("ul",[e("li",[s._v("RDBæ‰§è¡Œé—´éš”æ—¶é—´é•¿ï¼Œä¸¤æ¬¡RDBä¹‹é—´å†™å…¥æ•°æ®æœ‰ä¸¢å¤±çš„é£é™©")]),s._v(" "),e("li",[s._v("forkå­è¿›ç¨‹ã€å‹ç¼©ã€å†™å‡ºRDBæ–‡ä»¶éƒ½æ¯”è¾ƒè€—æ—¶")])]),s._v(" "),e("h3",{attrs:{id:"_1-2-aofæŒä¹…åŒ–"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-aofæŒä¹…åŒ–"}},[s._v("#")]),s._v(" 1.2 AOFæŒä¹…åŒ–")]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("æç¤º")]),s._v(" "),e("p",[s._v("AOFå…¨ç§°ä¸ºAppend Only Fileï¼ˆè¿½åŠ æ–‡ä»¶ï¼‰ã€‚Rediså¤„ç†çš„æ¯ä¸€ä¸ªå†™å‘½ä»¤éƒ½ä¼šè®°å½•åœ¨AOFæ–‡ä»¶ï¼Œå¯ä»¥çœ‹åšæ˜¯å‘½ä»¤æ—¥å¿—æ–‡ä»¶")])]),s._v(" "),e("p",[s._v("AOFçš„å‘½ä»¤è®°å½•çš„é¢‘ç‡ç­–ç•¥ï¼š\n"),e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Cynicism-lab/MyResource@gh-pages/image/image-20210725151654046.5ikekpcp33sw.webp",alt:""}})]),s._v(" "),e("blockquote",[e("p",[s._v("å› ä¸ºæ˜¯è®°å½•å‘½ä»¤ï¼ŒAOFæ–‡ä»¶ä¼šæ¯”RDBæ–‡ä»¶å¤§çš„å¤šã€‚è€Œä¸”AOFä¼šè®°å½•å¯¹åŒä¸€ä¸ªkeyçš„å¤šæ¬¡å†™æ“ä½œï¼Œä½†åªæœ‰æœ€åä¸€æ¬¡å†™æ“ä½œæ‰æœ‰æ„ä¹‰ã€‚é€šè¿‡æ‰§è¡Œ "),e("strong",[s._v("bgrewriteaof")]),s._v(" å‘½ä»¤ï¼Œå¯ä»¥è®©AOFæ–‡ä»¶æ‰§è¡Œé‡å†™åŠŸèƒ½ï¼Œç”¨æœ€å°‘çš„å‘½ä»¤è¾¾åˆ°ç›¸åŒæ•ˆæœ")])]),s._v(" "),e("h3",{attrs:{id:"_1-3-rdbä¸aofå¯¹æ¯”"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-rdbä¸aofå¯¹æ¯”"}},[s._v("#")]),s._v(" 1.3 RDBä¸AOFå¯¹æ¯”")]),s._v(" "),e("p",[s._v("RDBå’ŒAOFå„æœ‰è‡ªå·±çš„ä¼˜ç¼ºç‚¹ï¼Œå¦‚æœå¯¹æ•°æ®å®‰å…¨æ€§è¦æ±‚è¾ƒé«˜ï¼Œåœ¨å®é™…å¼€å‘ä¸­å¾€å¾€ä¼š"),e("strong",[s._v("ç»“åˆ")]),s._v("ä¸¤è€…æ¥ä½¿ç”¨\n"),e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Cynicism-lab/MyResource@gh-pages/image/image-20210725151940515.1fblfdki46bk.webp",alt:""}})]),s._v(" "),e("h2",{attrs:{id:"_2-redisä¸»ä»"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-redisä¸»ä»"}},[s._v("#")]),s._v(" 2. Redisä¸»ä»")]),s._v(" "),e("blockquote",[e("p",[s._v("å•èŠ‚ç‚¹Redisçš„å¹¶å‘èƒ½åŠ›æ˜¯æœ‰ä¸Šé™çš„ï¼Œè¦è¿›ä¸€æ­¥æé«˜Redisçš„å¹¶å‘èƒ½åŠ›ï¼Œå°±éœ€è¦æ­å»ºä¸»ä»é›†ç¾¤ï¼Œå®ç°è¯»å†™åˆ†ç¦»")])]),s._v(" "),e("p",[e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Cynicism-lab/MyResource@gh-pages/image/image-20210725152037611.4x1zh65gp79c.webp",alt:""}})]),s._v(" "),e("h3",{attrs:{id:"_2-1-ä¸»ä»æ•°æ®åŒæ­¥åŸç†"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-ä¸»ä»æ•°æ®åŒæ­¥åŸç†"}},[s._v("#")]),s._v(" 2.1 ä¸»ä»æ•°æ®åŒæ­¥åŸç†")]),s._v(" "),e("h4",{attrs:{id:"_2-1-1-å…¨é‡åŒæ­¥"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-1-å…¨é‡åŒæ­¥"}},[s._v("#")]),s._v(" 2.1.1 å…¨é‡åŒæ­¥")]),s._v(" "),e("p",[s._v("ä¸»ä»ç¬¬ä¸€æ¬¡å»ºç«‹è¿æ¥æ—¶ï¼Œä¼šæ‰§è¡Œ"),e("strong",[s._v("å…¨é‡åŒæ­¥")]),s._v("ï¼Œå°†masterèŠ‚ç‚¹çš„æ‰€æœ‰æ•°æ®éƒ½æ‹·è´ç»™slaveèŠ‚ç‚¹ï¼Œæµç¨‹ï¼š\n"),e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Cynicism-lab/MyResource@gh-pages/image/image-20210725152700914.40g3ii8u64n4.webp",alt:""}})]),s._v(" "),e("ul",[e("li",[s._v("slaveèŠ‚ç‚¹è¯·æ±‚å…¨é‡åŒæ­¥")]),s._v(" "),e("li",[s._v("masterèŠ‚ç‚¹åˆ¤æ–­replidï¼Œå‘ç°ä¸ä¸€è‡´ï¼ŒåŒæ„åŒæ­¥")]),s._v(" "),e("li",[s._v("masterå°†å®Œæ•´å†…å­˜æ•°æ®ç”ŸæˆRDBï¼Œå‘é€RDBåˆ°slave")]),s._v(" "),e("li",[s._v("slaveæ¸…ç©ºæœ¬åœ°æ•°æ®ï¼ŒåŠ è½½masterçš„RDB")]),s._v(" "),e("li",[s._v("masterå°†RDBæœŸé—´çš„å‘½ä»¤è®°å½•åœ¨repl_baklogï¼Œå¹¶æŒç»­å°†logä¸­çš„å‘½ä»¤å‘é€ç»™slave")]),s._v(" "),e("li",[s._v("slaveæ‰§è¡Œæ¥æ”¶åˆ°çš„å‘½ä»¤ï¼Œä¿æŒä¸masterä¹‹é—´çš„åŒæ­¥")])]),s._v(" "),e("blockquote",[e("p",[e("strong",[s._v("Replication Id")]),s._v("ï¼šç®€ç§°replidï¼Œæ˜¯æ•°æ®é›†çš„æ ‡è®°ï¼Œidä¸€è‡´åˆ™è¯´æ˜æ˜¯åŒä¸€æ•°æ®é›†ã€‚æ¯ä¸€ä¸ªmasteréƒ½æœ‰å”¯ä¸€çš„replidï¼Œslaveåˆ™ä¼šç»§æ‰¿masterèŠ‚ç‚¹çš„replid\n"),e("strong",[s._v("offset")]),s._v("ï¼šåç§»é‡ï¼Œéšç€è®°å½•åœ¨repl_baklogä¸­çš„æ•°æ®å¢å¤šè€Œé€æ¸å¢å¤§ã€‚slaveå®ŒæˆåŒæ­¥æ—¶ä¹Ÿä¼šè®°å½•å½“å‰åŒæ­¥çš„offsetã€‚å¦‚æœslaveçš„offsetå°äºmasterçš„offsetï¼Œè¯´æ˜slaveæ•°æ®è½åäºmasterï¼Œéœ€è¦æ›´æ–°ã€‚")])]),s._v(" "),e("h4",{attrs:{id:"_2-1-2-å¢é‡åŒæ­¥"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-2-å¢é‡åŒæ­¥"}},[s._v("#")]),s._v(" 2.1.2 å¢é‡åŒæ­¥")]),s._v(" "),e("blockquote",[e("p",[s._v("å…¨é‡åŒæ­¥éœ€è¦å…ˆåšRDBï¼Œç„¶åå°†RDBæ–‡ä»¶é€šè¿‡ç½‘ç»œä¼ è¾“ä¸ªslaveï¼Œæˆæœ¬å¤ªé«˜äº†ã€‚å› æ­¤é™¤äº†ç¬¬ä¸€æ¬¡åšå…¨é‡åŒæ­¥ï¼Œå…¶å®ƒå¤§å¤šæ•°æ—¶å€™slaveä¸masteréƒ½æ˜¯åš"),e("strong",[s._v("å¢é‡åŒæ­¥")]),s._v("ã€‚å°±æ˜¯åªæ›´æ–°slaveä¸masterå­˜åœ¨å·®å¼‚çš„éƒ¨åˆ†æ•°æ®ã€‚")])]),s._v(" "),e("p",[e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Cynicism-lab/MyResource@gh-pages/image/image-20210725153201086.1i8nmjwg8ncw.webp",alt:""}})]),s._v(" "),e("h4",{attrs:{id:"_2-1-3-repl-backlogåŸç†"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-3-repl-backlogåŸç†"}},[s._v("#")]),s._v(" 2.1.3 repl_backlogåŸç†")]),s._v(" "),e("blockquote",[e("p",[s._v("masteræ€ä¹ˆçŸ¥é“slaveä¸è‡ªå·±çš„æ•°æ®å·®å¼‚åœ¨å“ªé‡Œå‘¢?\nè¿™å°±è¦è¯´åˆ°å…¨é‡åŒæ­¥æ—¶çš„repl_baklogæ–‡ä»¶äº†ã€‚")])]),s._v(" "),e("p",[s._v("è¿™ä¸ªæ–‡ä»¶æ˜¯ä¸€ä¸ªå›ºå®šå¤§å°çš„æ•°ç»„ï¼Œåªä¸è¿‡æ•°ç»„æ˜¯ç¯å½¢ï¼Œä¹Ÿå°±æ˜¯è¯´"),e("strong",[s._v("è§’æ ‡åˆ°è¾¾æ•°ç»„æœ«å°¾åï¼Œä¼šå†æ¬¡ä»0å¼€å§‹è¯»å†™")]),s._v("ï¼Œè¿™æ ·æ•°ç»„å¤´éƒ¨çš„æ•°æ®å°±ä¼šè¢«è¦†ç›–ã€‚")]),s._v(" "),e("img",{attrs:{algin:"left",width:"30%",src:"https://cdn.jsdelivr.net/gh/Cynicism-lab/MyResource@gh-pages/image/image-20210725153359022.3gtiptcit83k.webp"}}),s._v(" "),e("img",{attrs:{align:"right",width:"30%",src:"https://cdn.jsdelivr.net/gh/Cynicism-lab/MyResource@gh-pages/image/image-20210725153715910.xn0wxkxe1sg.webp"}}),s._v(" "),e("ul",[e("li",[s._v("repl_baklogä¸­ä¼šè®°å½•Rediså¤„ç†è¿‡çš„å‘½ä»¤æ—¥å¿—åŠoffsetï¼ŒåŒ…æ‹¬masterå½“å‰çš„offsetï¼Œå’Œslaveå·²ç»æ‹·è´åˆ°çš„offsetï¼š")]),s._v(" "),e("li",[s._v("slaveä¸masterçš„offsetä¹‹é—´çš„å·®å¼‚ï¼Œå°±æ˜¯salveéœ€è¦å¢é‡æ‹·è´çš„æ•°æ®äº†ã€‚")]),s._v(" "),e("li",[s._v("éšç€ä¸æ–­æœ‰æ•°æ®å†™å…¥ï¼Œmasterçš„offseté€æ¸å˜å¤§ï¼Œslaveä¹Ÿä¸æ–­çš„æ‹·è´ï¼Œè¿½èµ¶masterçš„offset")]),s._v(" "),e("li",[s._v("ç›´åˆ°"),e("strong",[s._v("æ•°ç»„è¢«å¡«æ»¡")]),s._v("ï¼šæ­¤æ—¶ï¼Œå¦‚æœæœ‰æ–°çš„æ•°æ®å†™å…¥ï¼Œå°±ä¼š"),e("strong",[s._v("è¦†ç›–")]),s._v("æ•°ç»„ä¸­çš„æ—§æ•°æ®ã€‚ä¸è¿‡ï¼Œæ—§çš„æ•°æ®åªè¦æ˜¯ç»¿è‰²çš„ï¼Œè¯´æ˜æ˜¯å·²ç»è¢«åŒæ­¥åˆ°slaveçš„æ•°æ®ï¼Œå³ä¾¿è¢«è¦†ç›–äº†ä¹Ÿæ²¡ä»€ä¹ˆå½±å“ã€‚å› ä¸ºæœªåŒæ­¥çš„ä»…ä»…æ˜¯çº¢è‰²éƒ¨åˆ†")])]),s._v(" "),e("blockquote",[e("p",[s._v("ä½†æ˜¯ï¼Œå¦‚æœslaveå‡ºç°ç½‘ç»œé˜»å¡ï¼Œå¯¼è‡´masterçš„offsetè¿œè¿œè¶…è¿‡äº†slaveçš„offsetï¼š å¦‚æœmasterç»§ç»­å†™å…¥æ–°æ•°æ®ï¼Œå…¶offsetå°±ä¼šè¦†ç›–æ—§çš„æ•°æ®ï¼Œç›´åˆ°å°†slaveç°åœ¨çš„offsetä¹Ÿè¦†ç›–")])]),s._v(" "),e("p",[e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Cynicism-lab/MyResource@gh-pages/image/image-20210725154216392.60k76m43krnk.webp",alt:""}})]),s._v(" "),e("h3",{attrs:{id:"_2-2-ä¸»ä»åŒæ­¥ä¼˜åŒ–"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-ä¸»ä»åŒæ­¥ä¼˜åŒ–"}},[s._v("#")]),s._v(" 2.2 ä¸»ä»åŒæ­¥ä¼˜åŒ–")]),s._v(" "),e("p",[e("mark",[s._v("ä¸»ä»åŒæ­¥å¯ä»¥ä¿è¯ä¸»ä»æ•°æ®çš„ä¸€è‡´æ€§ï¼Œéå¸¸é‡è¦ã€‚")]),s._v("\nå¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢æ¥ä¼˜åŒ–Redisä¸»ä»å°±é›†ç¾¤ï¼š")]),s._v(" "),e("ul",[e("li",[s._v("åœ¨masterä¸­é…ç½®repl-diskless-sync yeså¯ç”¨æ— ç£ç›˜å¤åˆ¶ï¼Œé¿å…å…¨é‡åŒæ­¥æ—¶çš„ç£ç›˜IOã€‚")]),s._v(" "),e("li",[s._v("Rediså•èŠ‚ç‚¹ä¸Šçš„å†…å­˜å ç”¨ä¸è¦å¤ªå¤§ï¼Œå‡å°‘RDBå¯¼è‡´çš„è¿‡å¤šç£ç›˜IO")]),s._v(" "),e("li",[s._v("é€‚å½“æé«˜repl_baklogçš„å¤§å°ï¼Œå‘ç°slaveå®•æœºæ—¶å°½å¿«å®ç°æ•…éšœæ¢å¤ï¼Œå°½å¯èƒ½é¿å…å…¨é‡åŒæ­¥")]),s._v(" "),e("li",[s._v("é™åˆ¶ä¸€ä¸ªmasterä¸Šçš„slaveèŠ‚ç‚¹æ•°é‡ï¼Œå¦‚æœå®åœ¨æ˜¯å¤ªå¤šslaveï¼Œåˆ™å¯ä»¥é‡‡ç”¨ä¸»-ä»-ä»é“¾å¼ç»“æ„ï¼Œå‡å°‘masterå‹åŠ›,å¦‚å›¾:\n"),e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Cynicism-lab/MyResource@gh-pages/image/image-20210725154405899.3uqb2ysl52io.webp",alt:""}})])]),s._v(" "),e("h3",{attrs:{id:"_2-3-å°ç»“"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-å°ç»“"}},[s._v("#")]),s._v(" 2.3 å°ç»“")]),s._v(" "),e("p",[s._v("ç®€è¿°å…¨é‡åŒæ­¥å’Œå¢é‡åŒæ­¥åŒºåˆ«ï¼Ÿ")]),s._v(" "),e("ul",[e("li",[s._v("å…¨é‡åŒæ­¥ï¼šmasterå°†å®Œæ•´å†…å­˜æ•°æ®ç”ŸæˆRDBï¼Œå‘é€RDBåˆ°slaveã€‚åç»­å‘½ä»¤åˆ™è®°å½•åœ¨repl_baklogï¼Œé€ä¸ªå‘é€ç»™slaveã€‚")]),s._v(" "),e("li",[s._v("å¢é‡åŒæ­¥ï¼šslaveæäº¤è‡ªå·±çš„offsetåˆ°masterï¼Œmasterè·å–repl_baklogä¸­ä»offsetä¹‹åçš„å‘½ä»¤ç»™slave")])]),s._v(" "),e("p",[s._v("ä»€ä¹ˆæ—¶å€™æ‰§è¡Œå…¨é‡åŒæ­¥ï¼Ÿ")]),s._v(" "),e("ul",[e("li",[s._v("slaveèŠ‚ç‚¹ç¬¬ä¸€æ¬¡è¿æ¥masterèŠ‚ç‚¹æ—¶")]),s._v(" "),e("li",[s._v("slaveèŠ‚ç‚¹æ–­å¼€æ—¶é—´å¤ªä¹…ï¼Œrepl_baklogä¸­çš„offsetå·²ç»è¢«è¦†ç›–æ—¶")])]),s._v(" "),e("p",[s._v("ä»€ä¹ˆæ—¶å€™æ‰§è¡Œå¢é‡åŒæ­¥ï¼Ÿ")]),s._v(" "),e("ul",[e("li",[s._v("slaveèŠ‚ç‚¹æ–­å¼€åˆæ¢å¤ï¼Œå¹¶ä¸”åœ¨repl_baklogä¸­èƒ½æ‰¾åˆ°offsetæ—¶")])]),s._v(" "),e("h2",{attrs:{id:"_3-rediså“¨å…µ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-rediså“¨å…µ"}},[s._v("#")]),s._v(" 3. Rediså“¨å…µ")]),s._v(" "),e("blockquote",[e("p",[s._v("Redisæä¾›äº†å“¨å…µï¼ˆSentinelï¼‰æœºåˆ¶æ¥å®ç°ä¸»ä»é›†ç¾¤çš„è‡ªåŠ¨æ•…éšœæ¢å¤ã€‚")])]),s._v(" "),e("h3",{attrs:{id:"_3-1-å“¨å…µåŸç†"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-å“¨å…µåŸç†"}},[s._v("#")]),s._v(" 3.1 å“¨å…µåŸç†")]),s._v(" "),e("h4",{attrs:{id:"_3-1-1-é›†ç¾¤ç»“æ„å’Œä½œç”¨"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-1-é›†ç¾¤ç»“æ„å’Œä½œç”¨"}},[s._v("#")]),s._v(" 3.1.1 é›†ç¾¤ç»“æ„å’Œä½œç”¨")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Cynicism-lab/MyResource@gh-pages/image/image-20210725154528072.7hf44wgiq134.webp",alt:""}}),s._v("\nå“¨å…µçš„ä½œç”¨å¦‚ä¸‹ï¼š")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("ç›‘æ§")]),s._v("ï¼šSentinel ä¼šä¸æ–­æ£€æŸ¥æ‚¨çš„masterå’Œslaveæ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œ")]),s._v(" "),e("li",[e("strong",[s._v("è‡ªåŠ¨æ•…éšœæ¢å¤")]),s._v("ï¼šå¦‚æœmasteræ•…éšœï¼ŒSentinelä¼šå°†ä¸€ä¸ªslaveæå‡ä¸ºmasterã€‚å½“æ•…éšœå®ä¾‹æ¢å¤åä¹Ÿä»¥æ–°çš„masterä¸ºä¸»")]),s._v(" "),e("li",[e("strong",[s._v("é€šçŸ¥")]),s._v("ï¼šSentinelå……å½“Rediså®¢æˆ·ç«¯çš„æœåŠ¡å‘ç°æ¥æºï¼Œå½“é›†ç¾¤å‘ç”Ÿæ•…éšœè½¬ç§»æ—¶ï¼Œä¼šå°†æœ€æ–°ä¿¡æ¯æ¨é€ç»™Redisçš„å®¢æˆ·ç«¯")])]),s._v(" "),e("h4",{attrs:{id:"_3-1-2-é›†ç¾¤ç›‘æ§åŸç†"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-2-é›†ç¾¤ç›‘æ§åŸç†"}},[s._v("#")]),s._v(" 3.1.2 é›†ç¾¤ç›‘æ§åŸç†")]),s._v(" "),e("p",[s._v("SentinelåŸºäº"),e("strong",[s._v("å¿ƒè·³æœºåˆ¶")]),s._v("ç›‘æµ‹æœåŠ¡çŠ¶æ€ï¼Œæ¯éš”1ç§’å‘é›†ç¾¤çš„æ¯ä¸ªå®ä¾‹å‘é€pingå‘½ä»¤ï¼š")]),s._v(" "),e("ul",[e("li",[s._v("ä¸»è§‚ä¸‹çº¿ï¼šå¦‚æœæŸsentinelèŠ‚ç‚¹å‘ç°æŸå®ä¾‹æœªåœ¨è§„å®šæ—¶é—´å“åº”ï¼Œåˆ™è®¤ä¸ºè¯¥å®ä¾‹"),e("strong",[s._v("ä¸»è§‚ä¸‹çº¿")]),s._v("ã€‚")]),s._v(" "),e("li",[s._v("å®¢è§‚ä¸‹çº¿ï¼šè‹¥è¶…è¿‡æŒ‡å®šæ•°é‡ï¼ˆquorumï¼‰çš„sentineléƒ½è®¤ä¸ºè¯¥å®ä¾‹ä¸»è§‚ä¸‹çº¿ï¼Œåˆ™è¯¥å®ä¾‹"),e("strong",[s._v("å®¢è§‚ä¸‹çº¿")]),s._v("ã€‚quorumå€¼æœ€å¥½è¶…è¿‡Sentinelå®ä¾‹æ•°é‡çš„ä¸€åŠã€‚")])]),s._v(" "),e("h4",{attrs:{id:"_3-1-3-é›†ç¾¤æ•…éšœæ¢å¤åŸç†"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-3-é›†ç¾¤æ•…éšœæ¢å¤åŸç†"}},[s._v("#")]),s._v(" 3.1.3 é›†ç¾¤æ•…éšœæ¢å¤åŸç†")]),s._v(" "),e("p",[e("strong",[s._v("1) æ–°ä¸»èŠ‚ç‚¹é€‰æ‹©")]),s._v("\nä¸€æ—¦å‘ç°masteræ•…éšœï¼Œsentineléœ€è¦åœ¨salveä¸­é€‰æ‹©ä¸€ä¸ªä½œä¸ºæ–°çš„masterï¼Œé€‰æ‹©ä¾æ®æ˜¯è¿™æ ·çš„ï¼š")]),s._v(" "),e("ul",[e("li",[s._v("é¦–å…ˆä¼šåˆ¤æ–­slaveèŠ‚ç‚¹ä¸masterèŠ‚ç‚¹"),e("strong",[s._v("æ–­å¼€æ—¶é—´é•¿çŸ­")]),s._v("ï¼Œå¦‚æœè¶…è¿‡æŒ‡å®šå€¼ï¼ˆdown-after-milliseconds * 10ï¼‰åˆ™ä¼šæ’é™¤è¯¥slaveèŠ‚ç‚¹")]),s._v(" "),e("li",[s._v("ç„¶ååˆ¤æ–­slaveèŠ‚ç‚¹çš„"),e("strong",[s._v("slave-priority")]),s._v("å€¼ï¼Œè¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼Œå¦‚æœæ˜¯0åˆ™æ°¸ä¸å‚ä¸é€‰ä¸¾")]),s._v(" "),e("li",[s._v("å¦‚æœslave-prorityä¸€æ ·ï¼Œåˆ™åˆ¤æ–­slaveèŠ‚ç‚¹çš„"),e("strong",[s._v("offset")]),s._v("å€¼ï¼Œè¶Šå¤§è¯´æ˜æ•°æ®è¶Šæ–°ï¼Œä¼˜å…ˆçº§è¶Šé«˜")]),s._v(" "),e("li",[s._v("æœ€åæ˜¯åˆ¤æ–­slaveèŠ‚ç‚¹çš„"),e("strong",[s._v("è¿è¡Œidå¤§å°")]),s._v("ï¼Œè¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ã€‚")])]),s._v(" "),e("p",[e("strong",[s._v("2) æ•…éšœè½¬ç§»æ¢å¤")])]),s._v(" "),e("ul",[e("li",[s._v("sentinelç»™å¤‡é€‰çš„slave1èŠ‚ç‚¹å‘é€slaveof no oneå‘½ä»¤ï¼Œè®©è¯¥èŠ‚ç‚¹æˆä¸ºmaster")]),s._v(" "),e("li",[s._v("sentinelç»™æ‰€æœ‰å…¶å®ƒslaveå‘é€slaveof 192.168.150.101 7002 å‘½ä»¤ï¼Œè®©è¿™äº›slaveæˆä¸ºæ–°masterçš„ä»èŠ‚ç‚¹ï¼Œå¼€å§‹ä»æ–°çš„masterä¸ŠåŒæ­¥æ•°æ®ã€‚")]),s._v(" "),e("li",[s._v("æœ€åï¼Œsentinelå°†æ•…éšœèŠ‚ç‚¹æ ‡è®°ä¸ºslaveï¼Œå½“æ•…éšœèŠ‚ç‚¹æ¢å¤åä¼šè‡ªåŠ¨æˆä¸ºæ–°çš„masterçš„slaveèŠ‚ç‚¹")])]),s._v(" "),e("h2",{attrs:{id:"_4-redisåˆ†ç‰‡é›†ç¾¤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-redisåˆ†ç‰‡é›†ç¾¤"}},[s._v("#")]),s._v(" 4. Redisåˆ†ç‰‡é›†ç¾¤")]),s._v(" "),e("h3",{attrs:{id:"_4-1-æ­å»ºåˆ†ç‰‡é›†ç¾¤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-æ­å»ºåˆ†ç‰‡é›†ç¾¤"}},[s._v("#")]),s._v(" 4.1 æ­å»ºåˆ†ç‰‡é›†ç¾¤")]),s._v(" "),e("blockquote",[e("p",[s._v("ä¸»ä»å’Œå“¨å…µå¯ä»¥è§£å†³é«˜å¯ç”¨ã€é«˜å¹¶å‘è¯»çš„é—®é¢˜ã€‚ä½†æ˜¯ä¾ç„¶æœ‰ä¸¤ä¸ªé—®é¢˜æ²¡æœ‰è§£å†³ï¼š"),e("strong",[s._v("æµ·é‡æ•°æ®å­˜å‚¨é—®é¢˜")]),s._v("  + "),e("strong",[s._v("é«˜å¹¶å‘å†™çš„é—®é¢˜")])])]),s._v(" "),e("p",[s._v("ä½¿ç”¨åˆ†ç‰‡é›†ç¾¤å¯ä»¥è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œå¦‚å›¾:\n"),e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Cynicism-lab/MyResource@gh-pages/image/image-20210725155747294.6dwlsmot55z4.webp",alt:""}}),s._v("\nåˆ†ç‰‡é›†ç¾¤ç‰¹å¾ï¼š")]),s._v(" "),e("ul",[e("li",[s._v("é›†ç¾¤ä¸­æœ‰å¤šä¸ªmasterï¼Œæ¯ä¸ªmasterä¿å­˜ä¸åŒæ•°æ®")]),s._v(" "),e("li",[s._v("æ¯ä¸ªmasteréƒ½å¯ä»¥æœ‰å¤šä¸ªslaveèŠ‚ç‚¹")]),s._v(" "),e("li",[s._v("masterä¹‹é—´é€šè¿‡pingç›‘æµ‹å½¼æ­¤å¥åº·çŠ¶æ€")]),s._v(" "),e("li",[s._v("å®¢æˆ·ç«¯è¯·æ±‚å¯ä»¥è®¿é—®é›†ç¾¤ä»»æ„èŠ‚ç‚¹ï¼Œæœ€ç»ˆéƒ½ä¼šè¢«è½¬å‘åˆ°æ­£ç¡®èŠ‚ç‚¹")])]),s._v(" "),e("h3",{attrs:{id:"_4-2-æ•£åˆ—æ’æ§½"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-æ•£åˆ—æ’æ§½"}},[s._v("#")]),s._v(" 4.2.æ•£åˆ—æ’æ§½")]),s._v(" "),e("h4",{attrs:{id:"_4-2-1-æ’æ§½åŸç†"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-1-æ’æ§½åŸç†"}},[s._v("#")]),s._v(" 4.2.1.æ’æ§½åŸç†")]),s._v(" "),e("p",[s._v("Redisä¼šæŠŠæ¯ä¸€ä¸ªmasterèŠ‚ç‚¹æ˜ å°„åˆ°0~16383å…±16384ä¸ªæ’æ§½ï¼ˆhash slotï¼‰ä¸Šï¼ŒæŸ¥çœ‹é›†ç¾¤ä¿¡æ¯æ—¶å°±èƒ½çœ‹åˆ°ï¼š\n"),e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Cynicism-lab/MyResource@gh-pages/image/image-20210725155820320.66v5q5xn7wg0.webp",alt:""}})]),s._v(" "),e("p",[s._v("æ•°æ®keyä¸æ˜¯ä¸èŠ‚ç‚¹ç»‘å®šï¼Œè€Œæ˜¯ä¸"),e("strong",[s._v("æ’æ§½ç»‘å®š")]),s._v("ã€‚\nredisä¼šæ ¹æ®keyçš„æœ‰æ•ˆéƒ¨åˆ†è®¡ç®—æ’æ§½å€¼ï¼Œåˆ†ä¸¤ç§æƒ…å†µï¼š")]),s._v(" "),e("ul",[e("li",[s._v('keyä¸­åŒ…å«"{}"ï¼Œä¸”â€œ{}â€ä¸­è‡³å°‘åŒ…å«1ä¸ªå­—ç¬¦ï¼Œâ€œ{}â€ä¸­çš„éƒ¨åˆ†æ˜¯æœ‰æ•ˆéƒ¨åˆ†')]),s._v(" "),e("li",[s._v("keyä¸­ä¸åŒ…å«â€œ{}â€ï¼Œæ•´ä¸ªkeyéƒ½æ˜¯æœ‰æ•ˆéƒ¨åˆ†")])]),s._v(" "),e("blockquote",[e("p",[s._v("ä¾‹å¦‚ï¼škeyæ˜¯numï¼Œé‚£ä¹ˆå°±æ ¹æ®numè®¡ç®—ï¼Œå¦‚æœæ˜¯{itcast}numï¼Œåˆ™æ ¹æ®itcastè®¡ç®—ã€‚è®¡ç®—æ–¹å¼æ˜¯åˆ©ç”¨CRC16ç®—æ³•å¾—åˆ°ä¸€ä¸ªhashå€¼ï¼Œç„¶åå¯¹16384å–ä½™ï¼Œå¾—åˆ°çš„ç»“æœå°±æ˜¯slotå€¼ã€‚")])]),s._v(" "),e("blockquote",[e("p",[s._v("å¦‚ä½•å°†åŒä¸€ç±»æ•°æ®å›ºå®šçš„ä¿å­˜åœ¨åŒä¸€ä¸ªRediså®ä¾‹ï¼Ÿ")])]),s._v(" "),e("ul",[e("li",[s._v("è¿™ä¸€ç±»æ•°æ®ä½¿ç”¨ç›¸åŒçš„æœ‰æ•ˆéƒ¨åˆ†ï¼Œä¾‹å¦‚keyéƒ½ä»¥{typeId}ä¸ºå‰ç¼€")])]),s._v(" "),e("h3",{attrs:{id:"_4-3-é›†ç¾¤ä¼¸ç¼©"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-é›†ç¾¤ä¼¸ç¼©"}},[s._v("#")]),s._v(" 4.3 é›†ç¾¤ä¼¸ç¼©")]),s._v(" "),e("blockquote",[e("p",[s._v("æ·»åŠ æˆ–åˆ é™¤èŠ‚ç‚¹")])]),s._v(" "),e("p",[s._v("redis-cli --clusteræä¾›äº†å¾ˆå¤šæ“ä½œé›†ç¾¤çš„å‘½ä»¤ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢æ–¹å¼æŸ¥çœ‹ï¼š\n"),e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Cynicism-lab/MyResource@gh-pages/image/image-20210725160138290.4zclhey3rgjk.webp",alt:""}})]),s._v(" "),e("ul",[e("li",[s._v("reshardå‘½ä»¤å¯ä»¥è½¬ç§»æ’æ§½")])]),s._v(" "),e("h3",{attrs:{id:"_4-4-æ•…éšœè½¬ç§»"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-æ•…éšœè½¬ç§»"}},[s._v("#")]),s._v(" 4.4 æ•…éšœè½¬ç§»")]),s._v(" "),e("h4",{attrs:{id:"_4-4-1-è‡ªåŠ¨æ•…éšœè½¬ç§»"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-1-è‡ªåŠ¨æ•…éšœè½¬ç§»"}},[s._v("#")]),s._v(" 4.4.1 è‡ªåŠ¨æ•…éšœè½¬ç§»")]),s._v(" "),e("blockquote",[e("p",[s._v("ç›´æ¥åœæ­¢ä¸€ä¸ªrediså®ä¾‹ï¼Œä¾‹å¦‚7002")])]),s._v(" "),e("p",[s._v("1ï¼‰é¦–å…ˆæ˜¯è¯¥å®ä¾‹ä¸å…¶å®ƒå®ä¾‹å¤±å»è¿æ¥\n2ï¼‰ç„¶åæ˜¯ç–‘ä¼¼å®•æœºï¼š\n3ï¼‰æœ€åæ˜¯ç¡®å®šä¸‹çº¿ï¼Œè‡ªåŠ¨æå‡ä¸€ä¸ªslaveä¸ºæ–°çš„masterï¼š\n4ï¼‰å½“7002å†æ¬¡å¯åŠ¨ï¼Œå°±ä¼šå˜ä¸ºä¸€ä¸ªslaveèŠ‚ç‚¹äº†ï¼š")]),s._v(" "),e("h4",{attrs:{id:"_4-4-2-æ‰‹åŠ¨æ•…éšœè½¬ç§»"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-2-æ‰‹åŠ¨æ•…éšœè½¬ç§»"}},[s._v("#")]),s._v(" 4.4.2 æ‰‹åŠ¨æ•…éšœè½¬ç§»")]),s._v(" "),e("blockquote",[e("p",[s._v("åˆ©ç”¨"),e("strong",[s._v("cluster failover")]),s._v("å‘½ä»¤å¯ä»¥æ‰‹åŠ¨è®©é›†ç¾¤ä¸­çš„æŸä¸ªmasterå®•æœºï¼Œåˆ‡æ¢åˆ°æ‰§è¡Œcluster failoverå‘½ä»¤çš„è¿™ä¸ªslaveèŠ‚ç‚¹ï¼Œå®ç°æ— æ„ŸçŸ¥çš„æ•°æ®è¿ç§»ã€‚")])]),s._v(" "),e("p",[e("strong",[s._v("å…¶æµç¨‹å¦‚ä¸‹")]),s._v("ï¼š\n"),e("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Cynicism-lab/MyResource@gh-pages/image/image-20210725162441407.29y70vebqvr4.webp",alt:""}})]),s._v(" "),e("p",[s._v("è¿™ç§failoverå‘½ä»¤å¯ä»¥æŒ‡å®šä¸‰ç§æ¨¡å¼ï¼š")]),s._v(" "),e("ul",[e("li",[s._v("ç¼ºçœï¼šé»˜è®¤çš„æµç¨‹ï¼Œå¦‚å›¾1~6æ­©")]),s._v(" "),e("li",[s._v("forceï¼šçœç•¥äº†å¯¹offsetçš„ä¸€è‡´æ€§æ ¡éªŒ")]),s._v(" "),e("li",[s._v("takeoverï¼šç›´æ¥æ‰§è¡Œç¬¬5æ­©ï¼Œå¿½ç•¥æ•°æ®ä¸€è‡´æ€§ã€å¿½ç•¥masterçŠ¶æ€å’Œå…¶å®ƒmasterçš„æ„è§")])])])}),[],!1,null,null,null);e.default=v.exports}}]);
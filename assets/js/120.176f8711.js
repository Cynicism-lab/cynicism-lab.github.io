(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{480:function(t,s,_){"use strict";_.r(s);var e=_(8),a=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"_1-dslæŸ¥è¯¢æ–‡æ¡£"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-dslæŸ¥è¯¢æ–‡æ¡£"}},[t._v("#")]),t._v(" 1. DSLæŸ¥è¯¢æ–‡æ¡£")]),t._v(" "),s("blockquote",[s("p",[t._v("elasticsearchçš„æŸ¥è¯¢ä¾ç„¶æ˜¯åŸºäºJSONé£æ ¼çš„DSLæ¥å®ç°çš„ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"_1-1-dslæŸ¥è¯¢åˆ†ç±»"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-dslæŸ¥è¯¢åˆ†ç±»"}},[t._v("#")]),t._v(" 1.1 DSLæŸ¥è¯¢åˆ†ç±»")]),t._v(" "),s("blockquote",[s("p",[t._v("Elasticsearchæä¾›äº†åŸºäºJSONçš„DSLï¼ˆ"),s("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Domain Specific Language"),s("OutboundLink")],1),t._v("ï¼‰æ¥å®šä¹‰æŸ¥è¯¢ã€‚")])]),t._v(" "),s("p",[t._v("å¸¸è§çš„æŸ¥è¯¢ç±»å‹åŒ…æ‹¬ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("æŸ¥è¯¢æ‰€æœ‰")]),t._v("ï¼šæŸ¥è¯¢å‡ºæ‰€æœ‰æ•°æ®ï¼Œä¸€èˆ¬æµ‹è¯•ç”¨ã€‚ä¾‹å¦‚ï¼šmatch_all")]),t._v(" "),s("li",[s("strong",[t._v("å…¨æ–‡æ£€ç´¢ï¼ˆfull textï¼‰æŸ¥è¯¢")]),t._v("ï¼šåˆ©ç”¨åˆ†è¯å™¨å¯¹ç”¨æˆ·è¾“å…¥å†…å®¹åˆ†è¯ï¼Œç„¶åå»å€’æ’ç´¢å¼•åº“ä¸­åŒ¹é…ã€‚ä¾‹å¦‚ï¼š\n"),s("ul",[s("li",[t._v("match_query")]),t._v(" "),s("li",[t._v("multi_match_query")])])]),t._v(" "),s("li",[s("strong",[t._v("ç²¾ç¡®æŸ¥è¯¢")]),t._v("ï¼šæ ¹æ®ç²¾ç¡®è¯æ¡å€¼æŸ¥æ‰¾æ•°æ®ï¼Œä¸€èˆ¬æ˜¯æŸ¥æ‰¾keywordã€æ•°å€¼ã€æ—¥æœŸã€booleanç­‰ç±»å‹å­—æ®µã€‚ä¾‹å¦‚ï¼š\n"),s("ul",[s("li",[t._v("ids")]),t._v(" "),s("li",[t._v("range")]),t._v(" "),s("li",[t._v("term")])])]),t._v(" "),s("li",[s("strong",[t._v("åœ°ç†ï¼ˆgeoï¼‰æŸ¥è¯¢")]),t._v("ï¼šæ ¹æ®ç»çº¬åº¦æŸ¥è¯¢ã€‚ä¾‹å¦‚ï¼š\n"),s("ul",[s("li",[t._v("geo_distance")]),t._v(" "),s("li",[t._v("geo_bounding_box")])])]),t._v(" "),s("li",[s("strong",[t._v("å¤åˆï¼ˆcompoundï¼‰æŸ¥è¯¢")]),t._v("ï¼šå¤åˆæŸ¥è¯¢å¯ä»¥å°†ä¸Šè¿°å„ç§æŸ¥è¯¢æ¡ä»¶ç»„åˆèµ·æ¥ï¼Œåˆå¹¶æŸ¥è¯¢æ¡ä»¶ã€‚ä¾‹å¦‚ï¼š\n"),s("ul",[s("li",[t._v("bool")]),t._v(" "),s("li",[t._v("function_score")])])])]),t._v(" "),s("h3",{attrs:{id:"_1-2-å…¨æ–‡æ£€ç´¢æŸ¥è¯¢"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-å…¨æ–‡æ£€ç´¢æŸ¥è¯¢"}},[t._v("#")]),t._v(" 1.2 å…¨æ–‡æ£€ç´¢æŸ¥è¯¢")]),t._v(" "),s("p",[t._v("å¸¸è§çš„å…¨æ–‡æ£€ç´¢æŸ¥è¯¢åŒ…æ‹¬ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("matchæŸ¥è¯¢ï¼šå•å­—æ®µæŸ¥è¯¢")]),t._v(" "),s("li",[t._v("multi_matchæŸ¥è¯¢ï¼šå¤šå­—æ®µæŸ¥è¯¢ï¼Œä»»æ„ä¸€ä¸ªå­—æ®µç¬¦åˆæ¡ä»¶å°±ç®—ç¬¦åˆæŸ¥è¯¢æ¡ä»¶")])]),t._v(" "),s("blockquote",[s("p",[t._v("matchå’Œmulti_matchçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ")])]),t._v(" "),s("ul",[s("li",[t._v("matchï¼šæ ¹æ®ä¸€ä¸ªå­—æ®µæŸ¥è¯¢")]),t._v(" "),s("li",[t._v("multi_matchï¼šæ ¹æ®å¤šä¸ªå­—æ®µæŸ¥è¯¢ï¼Œå‚ä¸æŸ¥è¯¢å­—æ®µè¶Šå¤šï¼ŒæŸ¥è¯¢æ€§èƒ½è¶Šå·®")])]),t._v(" "),s("h3",{attrs:{id:"_1-3-ç²¾å‡†æŸ¥è¯¢"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-ç²¾å‡†æŸ¥è¯¢"}},[t._v("#")]),t._v(" 1.3 ç²¾å‡†æŸ¥è¯¢")]),t._v(" "),s("blockquote",[s("p",[t._v("ç²¾ç¡®æŸ¥è¯¢ä¸€èˆ¬æ˜¯æŸ¥æ‰¾keywordã€æ•°å€¼ã€æ—¥æœŸã€booleanç­‰ç±»å‹å­—æ®µã€‚æ‰€ä»¥"),s("strong",[t._v("ä¸ä¼š")]),t._v("å¯¹æœç´¢æ¡ä»¶åˆ†è¯ã€‚")])]),t._v(" "),s("p",[t._v("å¸¸è§çš„æœ‰ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("termï¼šæ ¹æ®è¯æ¡ç²¾ç¡®å€¼æŸ¥è¯¢")]),t._v(" "),s("li",[t._v("rangeï¼šæ ¹æ®å€¼çš„èŒƒå›´æŸ¥è¯¢")])]),t._v(" "),s("h3",{attrs:{id:"_1-4-åœ°ç†åæ ‡æŸ¥è¯¢"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-åœ°ç†åæ ‡æŸ¥è¯¢"}},[t._v("#")]),t._v(" 1.4 åœ°ç†åæ ‡æŸ¥è¯¢")]),t._v(" "),s("blockquote",[s("p",[t._v("æ‰€è°“çš„åœ°ç†åæ ‡æŸ¥è¯¢ï¼Œå…¶å®å°±æ˜¯æ ¹æ®ç»çº¬åº¦æŸ¥è¯¢ï¼Œå®˜æ–¹æ–‡æ¡£ï¼šhttps://www.elastic.co/guide/en/elasticsearch/reference/current/geo-queries.html")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("çŸ©å½¢èŒƒå›´æŸ¥è¯¢")]),t._v(": ä¹Ÿå°±æ˜¯geo_bounding_boxæŸ¥è¯¢ï¼ŒæŸ¥è¯¢åæ ‡è½åœ¨æŸä¸ªçŸ©å½¢èŒƒå›´çš„æ‰€æœ‰æ–‡æ¡£")]),t._v(" "),s("li",[s("strong",[t._v("é™„è¿‘æŸ¥è¯¢")]),t._v(": ä¹Ÿå«åšè·ç¦»æŸ¥è¯¢ï¼ˆgeo_distanceï¼‰ï¼šæŸ¥è¯¢åˆ°æŒ‡å®šä¸­å¿ƒç‚¹å°äºæŸä¸ªè·ç¦»å€¼çš„æ‰€æœ‰æ–‡æ¡£")])]),t._v(" "),s("h3",{attrs:{id:"_1-5-å¤åˆæŸ¥è¯¢"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-å¤åˆæŸ¥è¯¢"}},[t._v("#")]),t._v(" 1.5 å¤åˆæŸ¥è¯¢")]),t._v(" "),s("blockquote",[s("p",[t._v("å¤åˆï¼ˆcompoundï¼‰æŸ¥è¯¢ï¼šå¤åˆæŸ¥è¯¢å¯ä»¥å°†å…¶å®ƒç®€å•æŸ¥è¯¢ç»„åˆèµ·æ¥ï¼Œå®ç°æ›´å¤æ‚çš„æœç´¢é€»è¾‘ã€‚")])]),t._v(" "),s("p",[t._v("å¸¸è§çš„æœ‰ä¸¤ç§ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("fuction scoreï¼šç®—åˆ†å‡½æ•°æŸ¥è¯¢ï¼Œå¯ä»¥æ§åˆ¶æ–‡æ¡£ç›¸å…³æ€§ç®—åˆ†ï¼Œæ§åˆ¶æ–‡æ¡£æ’å")]),t._v(" "),s("li",[t._v("bool queryï¼šå¸ƒå°”æŸ¥è¯¢ï¼Œåˆ©ç”¨é€»è¾‘å…³ç³»ç»„åˆå¤šä¸ªå…¶å®ƒçš„æŸ¥è¯¢ï¼Œå®ç°å¤æ‚æœç´¢")])]),t._v(" "),s("p",[t._v("ğŸ” elasticsearchä¼šæ ¹æ®è¯æ¡å’Œæ–‡æ¡£çš„ç›¸å…³åº¦åšæ‰“åˆ†ï¼Œç®—æ³•ç”±ä¸¤ç§ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("TF-IDFç®—æ³•")])]),t._v(" "),s("li",[s("strong",[t._v("BM25ç®—æ³•")]),t._v("ï¼Œelasticsearch5.1ç‰ˆæœ¬åé‡‡ç”¨çš„ç®—æ³•")])]),t._v(" "),s("h4",{attrs:{id:"_1-5-1-ç®—åˆ†å‡½æ•°æŸ¥è¯¢"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-1-ç®—åˆ†å‡½æ•°æŸ¥è¯¢"}},[t._v("#")]),t._v(" 1.5.1 ç®—åˆ†å‡½æ•°æŸ¥è¯¢")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Cynicism-lab/MyResource@gh-pages/image/image-20210721191544750.56idiopjehhc.webp",alt:""}}),t._v("\nfunction score æŸ¥è¯¢ä¸­åŒ…å«å››éƒ¨åˆ†å†…å®¹ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("åŸå§‹æŸ¥è¯¢")]),t._v("æ¡ä»¶ï¼šqueryéƒ¨åˆ†ï¼ŒåŸºäºè¿™ä¸ªæ¡ä»¶æœç´¢æ–‡æ¡£ï¼Œå¹¶ä¸”åŸºäºBM25ç®—æ³•ç»™æ–‡æ¡£æ‰“åˆ†ï¼Œ"),s("strong",[t._v("åŸå§‹ç®—åˆ†")]),t._v("ï¼ˆquery scoreï¼‰")]),t._v(" "),s("li",[s("strong",[t._v("è¿‡æ»¤æ¡ä»¶")]),t._v("ï¼šfilteréƒ¨åˆ†ï¼Œç¬¦åˆè¯¥æ¡ä»¶çš„æ–‡æ¡£æ‰ä¼šé‡æ–°ç®—åˆ†")]),t._v(" "),s("li",[s("strong",[t._v("ç®—åˆ†å‡½æ•°")]),t._v("ï¼šç¬¦åˆfilteræ¡ä»¶çš„æ–‡æ¡£è¦æ ¹æ®è¿™ä¸ªå‡½æ•°åšè¿ç®—ï¼Œå¾—åˆ°çš„"),s("strong",[t._v("å‡½æ•°ç®—åˆ†")]),t._v("ï¼ˆfunction scoreï¼‰ï¼Œæœ‰å››ç§å‡½æ•°\n"),s("ul",[s("li",[t._v("weightï¼šå‡½æ•°ç»“æœæ˜¯å¸¸é‡")]),t._v(" "),s("li",[t._v("field_value_factorï¼šä»¥æ–‡æ¡£ä¸­çš„æŸä¸ªå­—æ®µå€¼ä½œä¸ºå‡½æ•°ç»“æœ")]),t._v(" "),s("li",[t._v("random_scoreï¼šä»¥éšæœºæ•°ä½œä¸ºå‡½æ•°ç»“æœ")]),t._v(" "),s("li",[t._v("script_scoreï¼šè‡ªå®šä¹‰ç®—åˆ†å‡½æ•°ç®—æ³•")])])]),t._v(" "),s("li",[s("strong",[t._v("è¿ç®—æ¨¡å¼")]),t._v("ï¼šç®—åˆ†å‡½æ•°çš„ç»“æœã€åŸå§‹æŸ¥è¯¢çš„ç›¸å…³æ€§ç®—åˆ†ï¼Œä¸¤è€…ä¹‹é—´çš„è¿ç®—æ–¹å¼ï¼ŒåŒ…æ‹¬ï¼š\n"),s("ul",[s("li",[t._v("multiplyï¼šç›¸ä¹˜")]),t._v(" "),s("li",[t._v("replaceï¼šç”¨function scoreæ›¿æ¢query score")]),t._v(" "),s("li",[t._v("å…¶å®ƒï¼Œä¾‹å¦‚ï¼šsumã€avgã€maxã€min")])])])]),t._v(" "),s("h4",{attrs:{id:"_1-5-2-å¸ƒå°”æŸ¥è¯¢"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-2-å¸ƒå°”æŸ¥è¯¢"}},[t._v("#")]),t._v(" 1.5.2 å¸ƒå°”æŸ¥è¯¢")]),t._v(" "),s("blockquote",[s("p",[t._v("å¸ƒå°”æŸ¥è¯¢æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªæŸ¥è¯¢å­å¥çš„ç»„åˆï¼Œæ¯ä¸€ä¸ªå­å¥å°±æ˜¯ä¸€ä¸ª"),s("strong",[t._v("å­æŸ¥è¯¢")]),t._v("ã€‚")])]),t._v(" "),s("p",[t._v("å­æŸ¥è¯¢çš„ç»„åˆæ–¹å¼æœ‰ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("mustï¼šå¿…é¡»åŒ¹é…æ¯ä¸ªå­æŸ¥è¯¢ï¼Œç±»ä¼¼â€œä¸â€")]),t._v(" "),s("li",[t._v("shouldï¼šé€‰æ‹©æ€§åŒ¹é…å­æŸ¥è¯¢ï¼Œç±»ä¼¼â€œæˆ–â€")]),t._v(" "),s("li",[t._v("must_notï¼šå¿…é¡»ä¸åŒ¹é…ï¼Œ"),s("strong",[t._v("ä¸å‚ä¸ç®—åˆ†")]),t._v("ï¼Œç±»ä¼¼â€œéâ€")]),t._v(" "),s("li",[t._v("filterï¼šå¿…é¡»åŒ¹é…ï¼Œ"),s("strong",[t._v("ä¸å‚ä¸ç®—åˆ†")])])]),t._v(" "),s("p",[t._v("ğŸ’¡ æœç´¢æ—¶ï¼Œå‚ä¸"),s("strong",[t._v("æ‰“åˆ†çš„å­—æ®µè¶Šå¤šï¼ŒæŸ¥è¯¢çš„æ€§èƒ½ä¹Ÿè¶Šå·®")]),t._v("ã€‚å› æ­¤è¿™ç§å¤šæ¡ä»¶æŸ¥è¯¢æ—¶ï¼Œå»ºè®®è¿™æ ·åšï¼š")]),t._v(" "),s("ul",[s("li",[t._v("æœç´¢æ¡†çš„å…³é”®å­—æœç´¢ï¼Œæ˜¯å…¨æ–‡æ£€ç´¢æŸ¥è¯¢ï¼Œä½¿ç”¨mustæŸ¥è¯¢ï¼Œå‚ä¸ç®—åˆ†")]),t._v(" "),s("li",[t._v("å…¶å®ƒè¿‡æ»¤æ¡ä»¶ï¼Œé‡‡ç”¨filteræŸ¥è¯¢ã€‚ä¸å‚ä¸ç®—åˆ†")])]),t._v(" "),s("h2",{attrs:{id:"_2-æœç´¢ç»“æœå¤„ç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-æœç´¢ç»“æœå¤„ç†"}},[t._v("#")]),t._v(" 2. æœç´¢ç»“æœå¤„ç†")]),t._v(" "),s("h3",{attrs:{id:"_2-1-æ’åº"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-æ’åº"}},[t._v("#")]),t._v(" 2.1 æ’åº")]),t._v(" "),s("blockquote",[s("p",[t._v("elasticsearché»˜è®¤æ˜¯æ ¹æ®ç›¸å…³åº¦ç®—åˆ†ï¼ˆ_scoreï¼‰æ¥æ’åºï¼Œä½†æ˜¯ä¹Ÿæ”¯æŒè‡ªå®šä¹‰æ–¹å¼å¯¹æœç´¢"),s("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/sort-search-results.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ç»“æœæ’åº"),s("OutboundLink")],1),t._v("ã€‚å¯ä»¥æ’åºå­—æ®µç±»å‹æœ‰ï¼škeywordç±»å‹ã€æ•°å€¼ç±»å‹ã€åœ°ç†åæ ‡ç±»å‹ã€æ—¥æœŸç±»å‹ç­‰ã€‚")])]),t._v(" "),s("p",[t._v("ğŸ·ï¸ å¸¸ç”¨æ’åºæ–¹å¼ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("æ™®é€šå­—æ®µæ’åº")]),t._v(" "),s("li",[t._v("åœ°ç†åæ ‡æ’åº")])]),t._v(" "),s("h3",{attrs:{id:"_2-2-åˆ†é¡µ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-åˆ†é¡µ"}},[t._v("#")]),t._v(" 2.2 åˆ†é¡µ")]),t._v(" "),s("blockquote",[s("p",[t._v("elasticsearch é»˜è®¤æƒ…å†µä¸‹åªè¿”å›top10çš„æ•°æ®ã€‚è€Œå¦‚æœè¦æŸ¥è¯¢æ›´å¤šæ•°æ®å°±éœ€è¦ä¿®æ”¹åˆ†é¡µå‚æ•°äº†ã€‚")])]),t._v(" "),s("p",[t._v("ğŸ”– elasticsearchä¸­é€šè¿‡ä¿®æ”¹"),s("code",[t._v("from")]),t._v("ã€"),s("code",[t._v("size")]),t._v("å‚æ•°æ¥æ§åˆ¶è¦è¿”å›çš„åˆ†é¡µç»“æœï¼š")]),t._v(" "),s("ul",[s("li",[t._v("fromï¼šä»ç¬¬å‡ ä¸ªæ–‡æ¡£å¼€å§‹")]),t._v(" "),s("li",[t._v("sizeï¼šæ€»å…±æŸ¥è¯¢å‡ ä¸ªæ–‡æ¡£")])]),t._v(" "),s("h4",{attrs:{id:"_2-2-1-åŸºæœ¬çš„åˆ†é¡µ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1-åŸºæœ¬çš„åˆ†é¡µ"}},[t._v("#")]),t._v(" 2.2.1 åŸºæœ¬çš„åˆ†é¡µ")]),t._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("GET /hotel/_search\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"query"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"match_all"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"from"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ†é¡µå¼€å§‹çš„ä½ç½®ï¼Œé»˜è®¤ä¸º0")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"size"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æœŸæœ›è·å–çš„æ–‡æ¡£æ€»æ•°")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sort"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"price"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"asc"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("h4",{attrs:{id:"_2-2-2-æ·±åº¦åˆ†é¡µ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-2-æ·±åº¦åˆ†é¡µ"}},[t._v("#")]),t._v(" 2.2.2 æ·±åº¦åˆ†é¡µ")]),t._v(" "),s("blockquote",[s("p",[t._v("å½“æŸ¥è¯¢990å¼€å§‹çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ç¬¬990~ç¬¬1000æ¡æ•°æ®æ—¶ï¼Œelasticsearchå†…éƒ¨åˆ†é¡µæ—¶ï¼Œå¿…é¡»å…ˆæŸ¥è¯¢ 0~1000æ¡ï¼Œç„¶åæˆªå–å…¶ä¸­çš„990 ~ 1000çš„è¿™10æ¡ï¼Œä½†æ˜¯elasticsearchæ˜¯é›†ç¾¤çš„ï¼Œä¾‹å¦‚æˆ‘é›†ç¾¤æœ‰5ä¸ªèŠ‚ç‚¹ï¼Œåˆ™éœ€è¦æŸ¥5 * 1000æ¡")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Cynicism-lab/MyResource@gh-pages/image/image-20210721201003229.103u8k6df76o.webp",alt:""}}),t._v(" "),s("mark",[t._v("å½“æŸ¥è¯¢åˆ†é¡µæ·±åº¦è¾ƒå¤§æ—¶ï¼Œæ±‡æ€»æ•°æ®è¿‡å¤šï¼Œå¯¹å†…å­˜å’ŒCPUä¼šäº§ç”Ÿéå¸¸å¤§çš„å‹åŠ›ï¼Œå› æ­¤elasticsearchä¼šç¦æ­¢from+ size è¶…è¿‡10000çš„è¯·æ±‚")])]),t._v(" "),s("p",[t._v("ğŸ’¡ é’ˆå¯¹æ·±åº¦åˆ†é¡µï¼ŒESæä¾›äº†ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼Œ"),s("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/paginate-search-results.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("å®˜æ–¹æ–‡æ¡£"),s("OutboundLink")],1),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("search afterï¼šåˆ†é¡µæ—¶éœ€è¦æ’åºï¼ŒåŸç†æ˜¯ä»ä¸Šä¸€æ¬¡çš„æ’åºå€¼å¼€å§‹ï¼ŒæŸ¥è¯¢ä¸‹ä¸€é¡µæ•°æ®ã€‚å®˜æ–¹æ¨èä½¿ç”¨çš„æ–¹å¼ã€‚")]),t._v(" "),s("li",[t._v("scrollï¼šåŸç†å°†æ’åºåçš„æ–‡æ¡£idå½¢æˆå¿«ç…§ï¼Œä¿å­˜åœ¨å†…å­˜ã€‚å®˜æ–¹å·²ç»ä¸æ¨èä½¿ç”¨ã€‚")])]),t._v(" "),s("h4",{attrs:{id:"_2-2-3-å°ç»“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-3-å°ç»“"}},[t._v("#")]),t._v(" 2.2.3 å°ç»“")]),t._v(" "),s("p",[t._v("åˆ†é¡µæŸ¥è¯¢çš„å¸¸è§å®ç°æ–¹æ¡ˆä»¥åŠä¼˜ç¼ºç‚¹ï¼š")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("from + size")]),t._v("ï¼š\n"),s("ul",[s("li",[t._v("ä¼˜ç‚¹ï¼šæ”¯æŒéšæœºç¿»é¡µ")]),t._v(" "),s("li",[t._v("ç¼ºç‚¹ï¼šæ·±åº¦åˆ†é¡µé—®é¢˜ï¼Œé»˜è®¤æŸ¥è¯¢ä¸Šé™ï¼ˆfrom + sizeï¼‰æ˜¯10000")]),t._v(" "),s("li",[t._v("åœºæ™¯ï¼šç™¾åº¦ã€äº¬ä¸œã€è°·æ­Œã€æ·˜å®è¿™æ ·çš„éšæœºç¿»é¡µæœç´¢")])])]),t._v(" "),s("li",[s("code",[t._v("after search")]),t._v("ï¼š\n"),s("ul",[s("li",[t._v("ä¼˜ç‚¹ï¼šæ²¡æœ‰æŸ¥è¯¢ä¸Šé™ï¼ˆå•æ¬¡æŸ¥è¯¢çš„sizeä¸è¶…è¿‡10000ï¼‰")]),t._v(" "),s("li",[t._v("ç¼ºç‚¹ï¼šåªèƒ½å‘åé€é¡µæŸ¥è¯¢ï¼Œä¸æ”¯æŒéšæœºç¿»é¡µ")]),t._v(" "),s("li",[t._v("åœºæ™¯ï¼šæ²¡æœ‰éšæœºç¿»é¡µéœ€æ±‚çš„æœç´¢ï¼Œä¾‹å¦‚æ‰‹æœºå‘ä¸‹æ»šåŠ¨ç¿»é¡µ")])])]),t._v(" "),s("li",[s("code",[t._v("scroll")]),t._v("ï¼š\n"),s("ul",[s("li",[t._v("ä¼˜ç‚¹ï¼šæ²¡æœ‰æŸ¥è¯¢ä¸Šé™ï¼ˆå•æ¬¡æŸ¥è¯¢çš„sizeä¸è¶…è¿‡10000ï¼‰")]),t._v(" "),s("li",[t._v("ç¼ºç‚¹ï¼šä¼šæœ‰é¢å¤–å†…å­˜æ¶ˆè€—ï¼Œå¹¶ä¸”æœç´¢ç»“æœæ˜¯éå®æ—¶çš„")]),t._v(" "),s("li",[t._v("åœºæ™¯ï¼šæµ·é‡æ•°æ®çš„è·å–å’Œè¿ç§»ã€‚ä»ES7.1å¼€å§‹ä¸æ¨èï¼Œå»ºè®®ç”¨ after searchæ–¹æ¡ˆã€‚")])])])]),t._v(" "),s("h3",{attrs:{id:"_2-3-é«˜äº®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-é«˜äº®"}},[t._v("#")]),t._v(" 2.3 é«˜äº®")]),t._v(" "),s("blockquote",[s("p",[t._v("æˆ‘ä»¬åœ¨ç™¾åº¦ï¼Œäº¬ä¸œæœç´¢æ—¶ï¼Œå…³é”®å­—ä¼šå˜æˆçº¢è‰²ï¼Œæ¯”è¾ƒé†’ç›®ï¼Œè¿™å«é«˜äº®æ˜¾ç¤º")])]),t._v(" "),s("p",[t._v("é«˜äº®æ˜¾ç¤ºçš„å®ç°åˆ†ä¸ºä¸¤æ­¥ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("1ï¼‰ç»™æ–‡æ¡£ä¸­çš„æ‰€æœ‰å…³é”®å­—éƒ½æ·»åŠ ä¸€ä¸ªæ ‡ç­¾ï¼Œä¾‹å¦‚"),s("code",[t._v("<em>")]),t._v("æ ‡ç­¾")]),t._v(" "),s("li",[t._v("2ï¼‰é¡µé¢ç»™"),s("code",[t._v("<em>")]),t._v("æ ‡ç­¾ç¼–å†™CSSæ ·å¼")])]),t._v(" "),s("p",[s("strong",[t._v("æ³¨æ„ï¼š")])]),t._v(" "),s("ul",[s("li",[t._v("é«˜äº®æ˜¯å¯¹å…³é”®å­—é«˜äº®ï¼Œå› æ­¤"),s("strong",[t._v("æœç´¢æ¡ä»¶å¿…é¡»å¸¦æœ‰å…³é”®å­—")]),t._v("ï¼Œè€Œä¸èƒ½æ˜¯èŒƒå›´è¿™æ ·çš„æŸ¥è¯¢ã€‚")]),t._v(" "),s("li",[t._v("é»˜è®¤æƒ…å†µä¸‹ï¼Œ"),s("strong",[t._v("é«˜äº®çš„å­—æ®µï¼Œå¿…é¡»ä¸æœç´¢æŒ‡å®šçš„å­—æ®µä¸€è‡´")]),t._v("ï¼Œå¦åˆ™æ— æ³•é«˜äº®")]),t._v(" "),s("li",[t._v("å¦‚æœè¦å¯¹éæœç´¢å­—æ®µé«˜äº®ï¼Œåˆ™éœ€è¦æ·»åŠ ä¸€ä¸ªå±æ€§ï¼š"),s("code",[t._v("required_field_match=false")])])]),t._v(" "),s("h3",{attrs:{id:"_2-4-æ€»ç»“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-æ€»ç»“"}},[t._v("#")]),t._v(" 2.4 æ€»ç»“")]),t._v(" "),s("p",[t._v("æŸ¥è¯¢çš„DSLæ˜¯ä¸€ä¸ªå¤§çš„JSONå¯¹è±¡ï¼ŒåŒ…å«ä¸‹åˆ—å±æ€§ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("queryï¼šæŸ¥è¯¢æ¡ä»¶")]),t._v(" "),s("li",[t._v("fromå’Œsizeï¼šåˆ†é¡µæ¡ä»¶")]),t._v(" "),s("li",[t._v("sortï¼šæ’åºæ¡ä»¶")]),t._v(" "),s("li",[t._v("highlightï¼šé«˜äº®æ¡ä»¶")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Cynicism-lab/MyResource@gh-pages/image/image-20210721203657850.lxay30d04w0.webp",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"_3-restclientæŸ¥è¯¢æ–‡æ¡£"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-restclientæŸ¥è¯¢æ–‡æ¡£"}},[t._v("#")]),t._v(" 3. RestClientæŸ¥è¯¢æ–‡æ¡£")]),t._v(" "),s("ul",[s("li",[t._v("APIä¸å…¶å®ƒæŸ¥è¯¢çš„å·®åˆ«åŒæ ·æ˜¯åœ¨æŸ¥è¯¢æ¡ä»¶çš„æ„å»ºï¼ŒQueryBuildersï¼Œç»“æœè§£æç­‰å…¶ä»–ä»£ç å®Œå…¨ä¸å˜ã€‚")])])])}),[],!1,null,null,null);s.default=a.exports}}]);
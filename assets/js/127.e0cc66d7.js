(window.webpackJsonp=window.webpackJsonp||[]).push([[127],{487:function(t,a,s){"use strict";s.r(a);var n=s(8),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("æç¤º")]),t._v(" "),a("p",[t._v("æœ¬æ–‡ä¸»è¦æè¿°xmlæ–‡ä»¶åˆ›å»ºbeanä»¥åŠåŠ è½½åˆ°IOCå®¹å™¨ä¸­çš„å…¨éƒ¨æµç¨‹")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Cynicism-lab/MyResource@gh-pages/image/bean.png",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"_1-beançš„åˆ›å»ºæ–¹å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-beançš„åˆ›å»ºæ–¹å¼"}},[t._v("#")]),t._v(" 1. Beançš„åˆ›å»ºæ–¹å¼")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("ä½¿ç”¨"),a("strong",[t._v("Spring XMLæ–‡ä»¶")]),t._v("æ–¹å¼é…ç½®ï¼šåœ¨XMLé…ç½®æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨<bean>  æ ‡ç­¾æ¥å®šä¹‰Bean")])]),t._v(" "),a("li",[a("p",[t._v("ä½¿ç”¨"),a("strong",[t._v("æ³¨è§£")]),t._v("( "),a("strong",[t._v("javaweb")]),t._v(")ï¼šå¯ä»¥ä½¿ç”¨@Componentã€@Serviceã€@Controllerã€@Repositoryç­‰æ³¨è§£æ¥å®šä¹‰Bean")])])]),t._v(" "),a("blockquote",[a("p",[t._v("@ComponentScanç”¨äºæ‰«ææŒ‡å®šåŒ…ä¸‹çš„æ‰€æœ‰ä½¿ç”¨@Componentå®šä¹‰çš„Bean")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("ä½¿ç”¨ "),a("strong",[t._v("@Bean")]),t._v(" æ³¨è§£ï¼šåœ¨é…ç½®ç±»ä¸­ï¼Œå¯ä»¥ä½¿ç”¨@Beanæ³¨è§£æ¥å®šä¹‰Beanï¼Œå°†æŸä¸ªæ–¹æ³•çš„è¿”å›å€¼ä½œä¸ºä¸€ä¸ªbean")])]),t._v(" "),a("li",[a("p",[t._v("ä½¿ç”¨ "),a("strong",[t._v("@Import")]),t._v("æ³¨è§£ï¼šå¯ä»¥ä½¿ç”¨@Importæ³¨è§£æ¥å¯¼å…¥å…¶ä»–é…ç½®ç±»æˆ–è€…ç›´æ¥å¯¼å…¥Beanç±»")])]),t._v(" "),a("li",[a("p",[t._v("ä½¿ç”¨"),a("strong",[t._v("ImportSelector")]),t._v("æˆ–è€…"),a("strong",[t._v("ImportBeanDefinitionRegistrar")]),t._v("æ¥å£ï¼šé…åˆ@Importæ³¨è§£ï¼Œå¯ä»¥å®ç°æ›´å¤æ‚çš„é€»è¾‘æ¥å®šä¹‰Bean")])]),t._v(" "),a("li",[a("p",[t._v("ä½¿ç”¨"),a("strong",[t._v("å·¥å‚æ–¹æ³•")]),t._v("ï¼šå¯ä»¥å®šä¹‰ä¸€ä¸ªå·¥å‚ç±»ï¼Œç„¶ååœ¨å·¥å‚ç±»ä¸­å®šä¹‰é™æ€æˆ–è€…å®ä¾‹æ–¹æ³•æ¥åˆ›å»ºBean")])])]),t._v(" "),a("h2",{attrs:{id:"_2-beançš„ä½œç”¨åŸŸ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-beançš„ä½œç”¨åŸŸ"}},[t._v("#")]),t._v(" 2. Beançš„ä½œç”¨åŸŸ")]),t._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[t._v("ä½œç”¨åŸŸ")]),t._v(" "),a("p",[t._v("åœ¨Springæ¡†æ¶ä¸­ï¼ŒBeançš„ä½œç”¨åŸŸï¼ˆScopeï¼‰å†³å®šäº†Beanåœ¨åº”ç”¨ç¨‹åºå„ç§ä¸Šä¸‹æ–‡ä¸­çš„ç”Ÿå‘½å‘¨æœŸå’Œå¯è§æ€§ï¼Œå¯é€šè¿‡@Scopeæ³¨è§£æŒ‡å®šä½œç”¨åŸŸ")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("Singleton")]),t._v("ï¼š"),a("strong",[t._v("è¿™æ˜¯é»˜è®¤çš„ä½œç”¨åŸŸ")]),t._v("ã€‚å¯¹äºæ¯ä¸ªSpring IoCå®¹å™¨ï¼Œæ¯ä¸ªå•ä¾‹Beançš„å®šä¹‰éƒ½å¯¹åº”ä¸€ä¸ªå¯¹è±¡å®ä¾‹")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Prototype")]),t._v("ï¼šå¯¹äºæ¯ä¸ªBeanå®šä¹‰ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡å®ä¾‹")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Request")]),t._v("ï¼šå¯¹äºæ¯ä¸ªBeanå®šä¹‰ï¼Œæ¯ä¸ªHTTPè¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡å®ä¾‹ã€‚è¿™ä¸ªä½œç”¨åŸŸåªåœ¨web-awareçš„Spring ApplicationContextä¸­æœ‰æ•ˆ")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Session")]),t._v("ï¼šå¯¹äºæ¯ä¸ªBeanå®šä¹‰ï¼Œæ¯ä¸ªHTTPä¼šè¯éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡å®ä¾‹ã€‚è¿™ä¸ªä½œç”¨åŸŸåªåœ¨web-awareçš„Spring ApplicationContextä¸­æœ‰æ•ˆ")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Application")]),t._v("ï¼šå¯¹äºæ¯ä¸ªBeanå®šä¹‰ï¼Œæ¯ä¸ªServletContextéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡å®ä¾‹ã€‚è¿™ä¸ªä½œç”¨åŸŸåªåœ¨web-awareçš„Spring ApplicationContextä¸­æœ‰æ•ˆ")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Websocket")]),t._v("ï¼šå¯¹äºæ¯ä¸ªBeanå®šä¹‰ï¼Œæ¯ä¸ªWebSocketéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡å®ä¾‹ã€‚è¿™ä¸ªä½œç”¨åŸŸåªåœ¨web-awareçš„Spring ApplicationContextä¸­æœ‰æ•ˆ")])])]),t._v(" "),a("h2",{attrs:{id:"_3-beandefinitionreader"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-beandefinitionreader"}},[t._v("#")]),t._v(" 3. BeanDefinitionReader")]),t._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[t._v("ç¬”è®°")]),t._v(" "),a("p",[t._v("BeanDefinitionReaderçš„ä½œç”¨æ˜¯è¯»å–Springé…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œå°†å…¶è½¬æ¢ä¸ºIoCå®¹å™¨å†…éƒ¨çš„æ•°æ®ç»“æ„ï¼šBeanDefinition")])]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBeanDefinition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClassPathResource")]),t._v(" resource "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClassPathResource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"application_context.xml"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultListableBeanFactory")]),t._v(" factory "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultListableBeanFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XmlBeanDefinitionReader")]),t._v(" reader "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XmlBeanDefinitionReader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("factory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    reader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadBeanDefinitions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resource"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("blockquote",[a("p",[t._v("ä¸Šè¿°çš„"),a("strong",[t._v("XmlBeanDefinitionReader")]),t._v("ç±»ä½œä¸º AbstractBeanDefinitionReader çš„æ‰©å±•ç±»ï¼Œç»§æ‰¿äº† AbstractBeanDefinitionReader æ‰€æœ‰çš„æ–¹æ³•ï¼ŒåŒæ—¶ä¹Ÿæ‰©å±•äº†å¾ˆå¤šæ–°çš„æ–¹æ³•ï¼Œä¸»è¦ç”¨äºè¯»å– XML æ–‡ä»¶ä¸­å®šä¹‰çš„ bean")])]),t._v(" "),a("p",[a("strong",[t._v("ä»£ç åˆ†æï¼š")])]),t._v(" "),a("ol",[a("li",[t._v("è·å–xmlæ–‡ä»¶èµ„æº")]),t._v(" "),a("li",[t._v("è·å–BeanFactoryï¼ŒDefaultListableBeanFactory()æ˜¯æœ€é‡è¦çš„å®ç°ç±»ä¹‹ä¸€")]),t._v(" "),a("li",[t._v("æ ¹æ®æ–°å»ºçš„ BeanFactory åˆ›å»ºä¸€ä¸ªBeanDefinitionReaderå¯¹è±¡ï¼Œè¯¥Reader å¯¹è±¡ä¸º"),a("strong",[t._v("èµ„æºçš„è§£æå™¨")])]),t._v(" "),a("li",[t._v("è£…è½½èµ„æºï¼š æ•´ä¸ªè¿‡ç¨‹å°±åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼šèµ„æºå®šä½ã€è£…è½½ã€æ³¨å†Œ"),a("br"),t._v(" "),a("strong",[t._v("4.1 å®šä½")]),t._v(": IoC å®¹å™¨çš„ç¬¬ä¸€æ­¥å°±æ˜¯éœ€è¦å®šä½è¿™ä¸ªå¤–éƒ¨èµ„æº"),a("br"),t._v(" "),a("strong",[t._v("4.2 è£…è½½")]),t._v(": è£…è½½å°±æ˜¯ BeanDefinition çš„è½½å…¥ï¼ŒBeanDefinitionReader è¯»å–ã€è§£æ Resource èµ„æºï¼Œä¹Ÿå°±æ˜¯å°†ç”¨æˆ·å®šä¹‰çš„ Bean è¡¨ç¤ºæˆ IoC å®¹å™¨ çš„å†…éƒ¨æ•°æ®ç»“æ„ï¼šBeanDefinitionã€‚åœ¨ IoC å®¹å™¨å†…éƒ¨ç»´æŠ¤ç€ä¸€ä¸ª BeanDefinition Map çš„æ•°æ®ç»“æ„ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­æ¯ä¸€ä¸ª<bean>éƒ½å¯¹åº”ç€ä¸€ä¸ª BeanDefinition å¯¹è±¡ã€‚"),a("br"),t._v(" "),a("strong",[t._v("4.3 æ³¨å†Œ")]),t._v(":å‘ IoC å®¹å™¨æ³¨å†Œåœ¨ç¬¬äºŒæ­¥è§£æå¥½çš„ BeanDefinitionï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯é€šè¿‡ BeanDefinitionRegistry æ¥å£æ¥å®ç°çš„ã€‚æœ¬è´¨ä¸Šæ˜¯å°†è§£æå¾—åˆ°çš„ BeanDefinition æ³¨å…¥åˆ°ä¸€ä¸ª HashMap å®¹å™¨ä¸­ï¼ŒIoC å®¹å™¨å°±æ˜¯é€šè¿‡è¿™ä¸ª HashMap HashMap æ¥ç»´æŠ¤è¿™äº› BeanDefinition çš„")])]),t._v(" "),a("blockquote",[a("p",[t._v("æ³¨æ„ï¼šæ­¤è¿‡ç¨‹å¹¶æ²¡æœ‰å®Œæˆä¾èµ–æ³¨å…¥ï¼Œä¾èµ–æ³¨å†Œæ˜¯å‘ç”Ÿåœ¨åº”ç”¨ç¬¬ä¸€æ¬¡è°ƒç”¨ getBean()å‘å®¹å™¨ç´¢è¦ Bean æ—¶")])]),t._v(" "),a("h2",{attrs:{id:"_4-beanfactorypostprocessor"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-beanfactorypostprocessor"}},[t._v("#")]),t._v(" 4. BeanFactoryPostProcessor")]),t._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[t._v("ç¬”è®°")]),t._v(" "),a("p",[t._v("BeanFactoryPostProcessorå…è®¸æˆ‘ä»¬åœ¨Springå®¹å™¨"),a("strong",[t._v("å®ä¾‹åŒ–beanä¹‹å‰")]),t._v("ï¼Œå¯¹beançš„å®šä¹‰ï¼ˆé…ç½®å…ƒæ•°æ®ï¼‰è¿›è¡Œä¿®æ”¹ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹beançš„scopeï¼Œæ˜¯å¦æ‡’åŠ è½½ï¼Œæ˜¯å¦æ˜¯æŠ½è±¡çš„ï¼Œä»¥åŠbeançš„å±æ€§å€¼ç­‰ã€‚")])]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CustomBeanFactoryPostProcessor")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BeanFactoryPostProcessor")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("postProcessBeanFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConfigurableListableBeanFactory")]),t._v(" beanFactory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BeansException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–beanå®šä¹‰")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BeanDefinition")]),t._v(" beanDefinition "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" beanFactory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBeanDefinition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"beanName"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¿®æ”¹beanå®šä¹‰")]),t._v("\n        beanDefinition"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setScope")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BeanDefinition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SCOPE_PROTOTYPE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("p",[a("strong",[t._v("ä»£ç åˆ†æ")]),t._v("ï¼šé€šè¿‡å®ç°BeanFactoryPostProcessorçš„postProcessBeanFactoryï¼ˆï¼‰æ–¹æ³•å®ç°ä¿®æ”¹BeanDefinition")]),t._v(" "),a("blockquote",[a("p",[t._v("BeanFactoryPostProcessorçš„ä¸€äº›å…¶ä»–å®ç°å­ç±»æ‰©å±•äº†ä¸€äº›åŠŸèƒ½ï¼Œä¾‹å¦‚PropertySourcesPlaceholderConfigureræ˜¯ä¸€ä¸ªBeanFactoryPostProcessorï¼Œå®ƒå¯ä»¥è§£æ@PropertySourceæ³¨è§£ï¼Œç”¨äºåŠ è½½å±æ€§æ–‡ä»¶ï¼ŒConfigurationClassPostProcessor å¯ä»¥è§£æ\n@ComponentScanï¼Œ@Beanï¼Œ@Importï¼Œ@ImportResourceç­‰ç­‰")])]),t._v(" "),a("h2",{attrs:{id:"_5-beanfactory"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-beanfactory"}},[t._v("#")]),t._v(" 5. BeanFactory")]),t._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[t._v("ç¬”è®°")]),t._v(" "),a("p",[t._v("BeanFactoryæ˜¯Springæ¡†æ¶çš„æ ¸å¿ƒæ¥å£ï¼Œå®ƒè´Ÿè´£å®ä¾‹åŒ–ã€å®šä½ã€é…ç½®åº”ç”¨ç¨‹åºä¸­çš„å¯¹è±¡ä»¥åŠå»ºç«‹è¿™äº›å¯¹è±¡é—´çš„ä¾èµ–ã€‚ç®€å•æ¥è¯´ï¼ŒBeanFactoryå°±æ˜¯ä¸€ä¸ªç®¡ç†Beançš„å·¥å‚ï¼Œå®ƒä¸»è¦è´Ÿè´£åˆå§‹åŒ–å„ç§Beanï¼Œå¹¶è°ƒç”¨å®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•")])]),t._v(" "),a("p",[t._v("ä»¥ä¸‹æ˜¯BeanFactoryçš„ä¸»è¦åŠŸèƒ½ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("å®ä¾‹åŒ–Bean")]),t._v("ï¼šBeanFactoryé€šè¿‡"),a("strong",[t._v("åå°„")]),t._v("æ ¹æ®é…ç½®ä¿¡æ¯åˆ›å»ºBeançš„å®ä¾‹")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("ç®¡ç†Beançš„ç”Ÿå‘½å‘¨æœŸ")]),t._v("ï¼šBeanFactoryè´Ÿè´£è°ƒç”¨Beançš„åˆå§‹åŒ–æ–¹æ³•å’Œé”€æ¯æ–¹æ³•ï¼Œç®¡ç†Beançš„ç”Ÿå‘½å‘¨æœŸ")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("å¤„ç†Beançš„ä¾èµ–å…³ç³»")]),t._v("ï¼šBeanFactoryè´Ÿè´£å¤„ç†Beanä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œä¾‹å¦‚è‡ªåŠ¨è£…é…å’Œä¾èµ–æ³¨å…¥")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("æä¾›Beançš„æŸ¥è¯¢å’ŒæŸ¥æ‰¾åŠŸèƒ½")]),t._v("ï¼šBeanFactoryæä¾›äº†ä¸€äº›æ–¹æ³•ï¼Œä¾‹å¦‚getBean()ï¼ŒcontainsBean()ï¼ŒisSingleton()ï¼ŒisPrototype()ï¼ŒisTypeMatch()ï¼ŒgetType()å’ŒgetAliases()ï¼Œç”¨äºæŸ¥è¯¢å’ŒæŸ¥æ‰¾Bean")])])]),t._v(" "),a("h2",{attrs:{id:"_6-populatebean"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-populatebean"}},[t._v("#")]),t._v(" 6. populateBean")]),t._v(" "),a("p",[t._v("populateBeanæ–¹æ³•æ˜¯Springæ¡†æ¶ä¸­AbstractAutowireCapableBeanFactoryç±»çš„ä¸€ä¸ªé‡è¦æ–¹æ³•ã€‚å®ƒä¸»è¦è´Ÿè´£Beanå®ä¾‹çš„å„ç§ä¾èµ–æ³¨å…¥ï¼ŒåŒ…æ‹¬è‡ªåŠ¨æ³¨å…¥ï¼ˆåç§°æ³¨å…¥å’Œç±»å‹æ³¨å…¥ï¼‰ã€æ³¨è§£æ³¨å…¥ï¼ˆ@Autowired å’Œ @Value ç­‰ï¼‰ã€æ‰‹åŠ¨æ³¨å…¥ç­‰ã€‚")]),t._v(" "),a("p",[t._v("ä»¥ä¸‹æ˜¯populateBeanæ–¹æ³•çš„ä¸»è¦æ­¥éª¤ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("æ¿€æ´»InstantiationAwareBeanPostProcessoråç½®å¤„ç†å™¨çš„postProcessAfterInstantiationæ–¹æ³•ï¼šåœ¨å®ä¾‹åŒ–beanä¹‹åï¼ŒSpringå±æ€§å¡«å……ä¹‹å‰æ‰§è¡Œçš„é’©å­æ–¹æ³•")])]),t._v(" "),a("li",[a("p",[t._v("è§£æä¾èµ–æ³¨å…¥çš„æ–¹å¼ï¼Œå°†å±æ€§è£…é…åˆ°PropertyValuesä¸­ï¼šæ ¹æ®æ³¨å…¥æ–¹å¼ï¼ˆå¦‚åç§°æ³¨å…¥æˆ–ç±»å‹æ³¨å…¥ï¼‰è§£æå±æ€§ï¼Œå¹¶å°†è§£æçš„å±æ€§å€¼æ·»åŠ åˆ°PropertyValuesä¸­")])]),t._v(" "),a("li",[a("p",[t._v("æ¿€æ´»InstantiationAwareBeanPostProcessor#postProcessPropertiesï¼šå¯¹@AutoWiredæ ‡è®°çš„å±æ€§è¿›è¡Œä¾èµ–æ³¨å…¥")])]),t._v(" "),a("li",[a("p",[t._v("å°†è§£æçš„å€¼ç”¨BeanWrapperè¿›è¡ŒåŒ…è£…ï¼šå°†PropertyValuesä¸­çš„å±æ€§å€¼åº”ç”¨åˆ°Beanå®ä¾‹ä¸­")])])]),t._v(" "),a("h2",{attrs:{id:"_7-aware"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-aware"}},[t._v("#")]),t._v(" 7. Aware")]),t._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[t._v("ç¬”è®°")]),t._v(" "),a("p",[t._v("åœ¨Springæ¡†æ¶ä¸­ï¼ŒAwareæ¥å£æ˜¯ä¸€ç»„æ ‡è®°æ¥å£ï¼Œç”¨äºåœ¨Beanè£…é…çš„è¿‡ç¨‹ä¸­è·å–Springå®¹å™¨ä¸­æä¾›çš„ä¸€äº›æ ¸å¿ƒç»„ä»¶æˆ–è¿è¡Œæ—¶ä¸Šä¸‹æ–‡ç­‰ä¿¡æ¯ã€‚"),a("strong",[t._v("å®ç°äº†Awareæ¥å£çš„Beanå¯ä»¥è®¿é—®Springå®¹å™¨")])])]),t._v(" "),a("p",[t._v("ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„Awareæ¥å£ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("BeanNameAwareï¼šå¯ä»¥è·å–åˆ°Springå®¹å™¨ä¸­Beançš„åç§°")])]),t._v(" "),a("li",[a("p",[t._v("BeanFactoryAwareï¼šå¯ä»¥è·å–åˆ°å½“å‰çš„BeanFactoryï¼Œä»è€Œå¯ä»¥è°ƒç”¨å®¹å™¨çš„æœåŠ¡")])]),t._v(" "),a("li",[a("p",[t._v("ApplicationContextAwareï¼šå¯ä»¥è·å–åˆ°å½“å‰çš„ApplicationContextï¼Œä»è€Œå¯ä»¥è°ƒç”¨å®¹å™¨çš„æœåŠ¡")])]),t._v(" "),a("li",[a("p",[t._v("MessageSourceAwareï¼šå¯ä»¥è·å–åˆ°Message Sourceï¼Œä»è€Œå¯ä»¥è·å–ç›¸å…³çš„æ–‡æœ¬ä¿¡æ¯")])]),t._v(" "),a("li",[a("p",[t._v("ApplicationEventPublisherAwareï¼šå¯ä»¥è·å–åˆ°ApplicationEventPublisherï¼Œä»è€Œå¯ä»¥å‘å¸ƒäº‹ä»¶")])]),t._v(" "),a("li",[a("p",[t._v("ResourceLoaderAwareï¼šå¯ä»¥è·å–åˆ°ResourceLoaderï¼Œä»è€Œå¯ä»¥åŠ è½½å¤–éƒ¨èµ„æºæ–‡ä»¶")])])]),t._v(" "),a("h2",{attrs:{id:"_8-beanpostprocessor"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-beanpostprocessor"}},[t._v("#")]),t._v(" 8. BeanPostProcessor")]),t._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[t._v("ç¬”è®°")]),t._v(" "),a("p",[t._v("BeanPostProcessoræ˜¯Springæ¡†æ¶ä¸­çš„ä¸€ä¸ªé‡è¦æ¥å£ï¼Œå®ƒå…è®¸æˆ‘ä»¬"),a("strong",[t._v("åœ¨Springå®¹å™¨å®ä¾‹åŒ–ã€é…ç½®å’Œåˆå§‹åŒ–Beanä¹‹åï¼Œä»¥åŠåœ¨é”€æ¯Beanä¹‹å‰")]),t._v("ï¼Œå¯¹Beanè¿›è¡Œä¸€äº›è‡ªå®šä¹‰çš„æ“ä½œ")])]),t._v(" "),a("p",[t._v("ä»¥ä¸‹æ˜¯BeanPostProcessorçš„ä¸»è¦åŠŸèƒ½ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("åœ¨åˆå§‹åŒ–ä¹‹å‰å’Œä¹‹åä¿®æ”¹Bean")]),t._v("ï¼šBeanPostProcessoræ¥å£å®šä¹‰äº†ä¸¤ä¸ªæ–¹æ³•ï¼špostProcessBeforeInitializationå’ŒpostProcessAfterInitializationã€‚è¿™ä¸¤ä¸ªæ–¹æ³•åˆ†åˆ«åœ¨Beanåˆå§‹åŒ–ä¹‹å‰å’Œä¹‹åè¢«è°ƒç”¨ï¼Œå…è®¸æˆ‘ä»¬åœ¨è¿™ä¸¤ä¸ªæ—¶é—´ç‚¹å¯¹Beanè¿›è¡Œä¿®æ”¹")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("å¤„ç†è‡ªå®šä¹‰æ³¨è§£")]),t._v("ï¼šBeanPostProcessorå¯ä»¥ç”¨æ¥å¤„ç†è‡ªå®šä¹‰æ³¨è§£ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªBeanPostProcessorï¼Œåœ¨postProcessBeforeInitializationæ–¹æ³•ä¸­æ£€æŸ¥Beanæ˜¯å¦æœ‰æŸä¸ªè‡ªå®šä¹‰æ³¨è§£ï¼Œå¦‚æœæœ‰ï¼Œåˆ™è¿›è¡Œç›¸åº”çš„å¤„ç†")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("åŒ…è£…Bean")]),t._v("ï¼šBeanPostProcessorè¿˜å¯ä»¥ç”¨æ¥åŒ…è£…Beanã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨postProcessAfterInitializationæ–¹æ³•ä¸­è¿”å›ä¸€ä¸ªåŒ…è£…äº†åŸå§‹Beançš„"),a("strong",[t._v("ä»£ç†å¯¹è±¡")]),t._v("(cglibæˆ–è€…jdkä»£ç†)")])])]),t._v(" "),a("h2",{attrs:{id:"_9-init-method"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-init-method"}},[t._v("#")]),t._v(" 9. init-method")]),t._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[t._v("ç¬”è®°")]),t._v(" "),a("p",[t._v("åœ¨Springæ¡†æ¶ä¸­ï¼Œinit-methodå±æ€§ç”¨äºåœ¨beanåˆå§‹åŒ–æ—¶æŒ‡å®šæ‰§è¡Œçš„æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ä¼šåœ¨beanå®ä¾‹åŒ–å¹¶è®¾ç½®å¥½å±æ€§ä¹‹åè¢«è°ƒç”¨ï¼Œé€šå¸¸ç”¨äºå®Œæˆä¸€äº›åˆå§‹åŒ–å·¥ä½œ")])]),t._v(" "),a("p",[t._v("ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ä¾‹å­ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("åŠ è½½æ•°æ®")]),t._v("ï¼šåˆå§‹åŒ–æ–¹æ³•å¯ä»¥ç”¨äºåœ¨å¯åŠ¨åº”ç”¨ç¨‹åºåç«‹å³åŠ è½½ä¸€äº›æ•°æ®ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½éœ€è¦ä»æ•°æ®åº“ä¸­æ‹‰å–ä¸€äº›æ•°æ®å¹¶ç¼“å­˜èµ·æ¥")]),t._v(" "),a("li",[a("strong",[t._v("è¯»å–é…ç½®å˜é‡")]),t._v("ï¼šåˆå§‹åŒ–æ–¹æ³•å¯ä»¥ç”¨äºè¯»å–é…ç½®æ–‡ä»¶ä¸­çš„å˜é‡ï¼Œå¹¶å°†è¿™äº›å˜é‡è®¾ç½®åˆ°Beançš„å±æ€§ä¸­")]),t._v(" "),a("li",[a("strong",[t._v("è®¾ç½®èµ„æº")]),t._v("ï¼šåˆå§‹åŒ–æ–¹æ³•å¯ä»¥ç”¨äºè®¾ç½®ä¸€äº›èµ„æºï¼Œä¾‹å¦‚æ‰“å¼€æ–‡ä»¶æˆ–è€…ç½‘ç»œè¿æ¥")]),t._v(" "),a("li",[a("strong",[t._v("æ‰§è¡Œä¸šåŠ¡é€»è¾‘")]),t._v("ï¼šåˆå§‹åŒ–æ–¹æ³•å¯ä»¥ç”¨äºæ‰§è¡Œä¸€äº›ä¸šåŠ¡é€»è¾‘ï¼Œä¾‹å¦‚è®¡ç®—ä¸€äº›å€¼æˆ–è€…æ›´æ–°ä¸€äº›çŠ¶æ€")])]),t._v(" "),a("blockquote",[a("p",[t._v("éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œinit-methodæŒ‡å®šçš„åˆå§‹åŒ–æ–¹æ³•ä¼šåœ¨Beanå®ä¾‹åŒ–å¹¶è®¾ç½®å¥½å±æ€§ä¹‹åè¢«è°ƒç”¨ï¼Œå› æ­¤ä½ å¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­è®¿é—®å’Œä¿®æ”¹Beançš„æ‰€æœ‰å±æ€§")])]),t._v(" "),a("h2",{attrs:{id:"_10-ä¸‰çº§ç¼“å­˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_10-ä¸‰çº§ç¼“å­˜"}},[t._v("#")]),t._v(" 10. ä¸‰çº§ç¼“å­˜")]),t._v(" "),a("div",{staticClass:"custom-block note"},[a("p",{staticClass:"custom-block-title"},[t._v("ç¬”è®°")]),t._v(" "),a("p",[t._v("Springä¸­çš„å¾ªç¯ä¾èµ–æ˜¯æŒ‡åœ¨Springåº”ç”¨ç¨‹åºä¸­ï¼Œä¸¤ä¸ªæˆ–å¤šä¸ªç±»ä¹‹é—´å­˜åœ¨å½¼æ­¤ä¾èµ–çš„æƒ…å†µï¼Œå½¢æˆä¸€ä¸ªå¾ªç¯ä¾èµ–é“¾ã€‚ä¾‹å¦‚ï¼ŒAä¾èµ–Bï¼ŒBåˆä¾èµ–Aï¼ŒAå’ŒBä¹‹é—´å°±å½¢æˆäº†ç›¸äº’ä¾èµ–çš„å…³ç³»")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Cynicism-lab/MyResource@gh-pages/image/circle.png",alt:""}})]),t._v(" "),a("p",[a("mark",[t._v("Springè§£å†³å¾ªç¯ä¾èµ–çš„æ–¹å¼ä¸»è¦æ˜¯é€šè¿‡ä¸‰çº§ç¼“å­˜")]),t._v("\nè¿™ä¸‰çº§ç¼“å­˜çš„ä½œç”¨æ˜¯åœ¨åˆ›å»ºBeançš„è¿‡ç¨‹ä¸­ï¼Œå½“ä¸€ä¸ªBeanåœ¨åˆå§‹åŒ–æ—¶éœ€è¦å¦ä¸€ä¸ªBeançš„å®ä¾‹ï¼Œè€Œå¦ä¸€ä¸ªBeanåˆéœ€è¦ç¬¬ä¸€ä¸ªBeançš„å®ä¾‹æ—¶ï¼Œ"),a("strong",[t._v("Springä¼šå…ˆå°†å·²ç»å®ä¾‹åŒ–ä½†è¿˜æœªå®Œæˆåˆå§‹åŒ–çš„Beanæå‰æš´éœ²å‡ºå»")]),t._v("ï¼Œä¹Ÿå°±æ˜¯åŠ å…¥åˆ°ç¼“å­˜ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥è¢«å…¶ä»–Beanå¼•ç”¨ï¼Œä»è€Œæ‰“ç ´å¾ªç¯ä¾èµ–")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸€çº§ç¼“å­˜")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" singletonObjects "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConcurrentHashMap")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("256")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// äºŒçº§ç¼“å­˜")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" earlySingletonObjects "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConcurrentHashMap")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸‰çº§ç¼“å­˜")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ObjectFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" singletonFactories "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashMap")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("ul",[a("li",[t._v("ä¸€çº§ç¼“å­˜ç”¨äº"),a("strong",[t._v("å­˜æ”¾å®¹å™¨ä¸­å¯ä»¥ä½¿ç”¨çš„beanæˆ–è€…ä»£ç†bean")]),t._v(" (æˆç†Ÿå“)")]),t._v(" "),a("li",[t._v("äºŒçº§ç¼“å­˜ç”¨äº"),a("strong",[t._v("å­˜æ”¾å®ä¾‹åŒ–çš„åŸå§‹å¯¹è±¡ï¼ˆçš„ä»£ç†å¯¹è±¡ï¼‰")]),t._v("ï¼ˆåŠæˆå“ï¼‰ï¼Œä»¥è®©åœ¨æœ‰å¤šé‡å¾ªç¯ä¾èµ–çš„æ—¶å€™å…¶å®ƒå¯¹è±¡éƒ½ä»äºŒçº§ç¼“å­˜ä¸­æ‹¿åˆ°åŒä¸€ä¸ªå½“å‰åŸå§‹å¯¹è±¡ï¼ˆçš„ä»£ç†å¯¹è±¡ï¼‰ï¼Œå¹¶ä¸”åªæœ‰åœ¨è°ƒç”¨äº†ä¸‰çº§ç¼“å­˜ä¸­çš„"),a("strong",[t._v("ObjectFactoryçš„getObject() æ–¹æ³•")]),t._v("è·å–åŸå§‹å¯¹è±¡ï¼ˆçš„ä»£ç†å¯¹è±¡ï¼‰æ—¶ï¼Œæ‰ä¼šå°†åŸå§‹å¯¹è±¡ï¼ˆçš„ä»£ç†å¯¹è±¡ï¼‰æ”¾å…¥äºŒçº§ç¼“å­˜")])]),t._v(" "),a("blockquote",[a("p",[t._v("è°ƒç”¨ä¸‰çº§ç¼“å­˜ä¸­çš„ObjectFactoryçš„getObject() æ–¹æ³•è·å–åŸå§‹å¯¹è±¡ï¼ˆçš„ä»£ç†å¯¹è±¡ï¼‰è¿™ç§æƒ…å†µåªä¼šå‘ç”Ÿåœ¨æœ‰å¾ªç¯ä¾èµ–çš„æ—¶å€™ï¼Œæ‰€ä»¥ï¼ŒäºŒçº§ç¼“å­˜åœ¨æ²¡æœ‰å¾ªç¯ä¾èµ–çš„æƒ…å†µä¸‹ä¸ä¼šè¢«ä½¿ç”¨åˆ°ã€‚")])]),t._v(" "),a("ul",[a("li",[t._v("ä¸‰çº§ç¼“å­˜ç”¨äº"),a("strong",[t._v("å­˜æ”¾åŸå§‹å¯¹è±¡å¯¹åº”çš„ObjectFactory")]),t._v("ï¼Œæ¯ç”Ÿæˆä¸€ä¸ªåŸå§‹å¯¹è±¡ï¼Œéƒ½ä¼šå°†è¿™ä¸ªåŸå§‹å¯¹è±¡å¯¹åº”çš„ObjectFactoryæ”¾åˆ°ä¸‰çº§ç¼“å­˜ä¸­ï¼Œ"),a("strong",[t._v("é€šè¿‡è°ƒç”¨ObjectFactoryçš„getObject() æ–¹æ³•ï¼Œå°±èƒ½å¤Ÿåœ¨éœ€è¦åŠ¨æ€ä»£ç†çš„æƒ…å†µä¸‹ä¸ºåŸå§‹å¯¹è±¡ç”Ÿæˆä»£ç†å¯¹è±¡å¹¶è¿”å›ï¼Œå¦åˆ™è¿”å›åŸå§‹å¯¹è±¡ï¼Œä»¥æ­¤æ¥å¤„ç†å¾ªç¯ä¾èµ–æ—¶è¿˜éœ€è¦åŠ¨æ€ä»£ç†çš„æƒ…å†µã€‚")])])]),t._v(" "),a("blockquote",[a("p",[t._v("ObjectFactoryæ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼Œä»…æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ä¼ å…¥lambdaè¡¨è¾¾å¼æˆ–è€…å†…éƒ¨ç±»ï¼Œé€šè¿‡è°ƒç”¨getObject()æ–¹æ³•æ‰§è¡Œå…·ä½“çš„é€»è¾‘,ä¾‹å¦‚getEarlyBeanReference()ï¼Œå®ç°åœ¨éœ€è¦åŠ¨æ€ä»£ç†çš„æƒ…å†µä¸‹ä¸ºåŸå§‹å¯¹è±¡ç”Ÿæˆä»£ç†å¯¹è±¡å¹¶è¿”å›ï¼Œå¦åˆ™è¿”å›åŸå§‹å¯¹è±¡")])]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å°†Aserviceæ·»åŠ ä¸‰çº§ç¼“å­˜")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addSingletonFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("beanName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEarlyBeanReference")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("beanName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mbd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bean"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ·»åŠ Bçš„Aå±æ€§æ—¶ä»ä¸‰çº§ä¸­æ‰¾Açš„ObjectFactoryç±»å‹ä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»å¯¹è±¡ï¼Œä»è€Œè§¦å‘åŒ¿åå†…éƒ¨ç±»getEarlyBeanReference()æ–¹æ³•å›è°ƒï¼Œè¿›å…¥åˆ›å»ºAServiceåˆ‡é¢ä»£ç†å¯¹è±¡é€»è¾‘")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEarlyBeanReference")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" beanName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RootBeanDefinition")]),t._v(" mbd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" bean"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åŸå§‹å¯¹è±¡")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" exposedObject "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" bean"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("mbd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isSynthetic")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasInstantiationAwareBeanPostProcessors")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//åˆ¤æ–­åç½®å¤„ç†å™¨æ˜¯å¦å®ç°äº†SmartInstantiationAwareBeanPostProcessoræ¥å£")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//è°ƒç”¨SmartInstantiationAwareBeanPostProcessorçš„getEarlyBeanReference")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SmartInstantiationAwareBeanPostProcessor")]),t._v(" bp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBeanPostProcessorCache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("smartInstantiationAware"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            exposedObject "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" bp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEarlyBeanReference")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("exposedObject"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" beanName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" exposedObject"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br")])]),a("p",[t._v("ğŸ”ç„¶è€Œï¼ŒSpringè§£å†³å¾ªç¯ä¾èµ–æ˜¯æœ‰å‰ç½®æ¡ä»¶çš„ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("å‡ºç°å¾ªç¯ä¾èµ–çš„Beanå¿…é¡»è¦æ˜¯å•ä¾‹ã€‚")]),t._v(" "),a("li",[t._v("ä¾èµ–æ³¨å…¥çš„æ–¹å¼ä¸èƒ½å…¨æ˜¯æ„é€ å™¨æ³¨å…¥çš„æ–¹å¼")])]),t._v(" "),a("p",[a("strong",[t._v("å…·ä½“å¾ªç¯ä¾èµ–è§£å†³æµç¨‹å®ç°å›¾ï¼š")]),t._v(" "),a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Cynicism-lab/MyResource@gh-pages/image/%E6%B5%81%E7%A8%8B.png",alt:""}})]),t._v(" "),a("p",[a("strong",[t._v("åªä½¿ç”¨ä¸€çº§ç¼“å­˜çš„é—®é¢˜")]),a("br"),t._v("\nä¸€çº§ç¼“å­˜ä¸­é¢„æœŸå­˜æ”¾çš„æ˜¯ä¸€ä¸ªæ­£å¸¸å®Œæ•´çš„beanï¼Œè€Œå¦‚æœåªç”¨ä¸€çº§ç¼“å­˜æ¥è§£å†³å¾ªç¯ä¾èµ–ï¼Œé‚£ä¹ˆä¸€çº§ç¼“å­˜ä¸­ä¼šåœ¨æŸä¸ªæ—¶é—´æ®µå­˜åœ¨ä¸å®Œæ•´çš„beanï¼Œè¿™æ˜¯ä¸å®‰å…¨çš„ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("ä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜è§£å†³å¾ªç¯ä¾èµ–")]),a("br"),t._v("\nä½¿ç”¨ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ç¡®å®å¯ä»¥è§£å†³å¾ªç¯ä¾èµ–ï¼Œä½†æ˜¯è¿™è¦æ±‚æ¯ä¸ªåŸå§‹å¯¹è±¡åˆ›å»ºå‡ºæ¥åå°±ç«‹å³ç”ŸæˆåŠ¨æ€ä»£ç†å¯¹è±¡ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ï¼Œç„¶åå°†è¿™ä¸ªåŠ¨æ€ä»£ç†å¯¹è±¡æ”¾å…¥äºŒçº§ç¼“å­˜ï¼Œè¿™å°±æ‰“ç ´äº†Springå¯¹AOPçš„è®¾è®¡åŸåˆ™ï¼Œå³ï¼š"),a("strong",[t._v("åœ¨å¯¹è±¡åˆå§‹åŒ–å®Œæ¯•åï¼Œå†å»åˆ›å»ºä»£ç†å¯¹è±¡")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("ğŸ”æ‰€ä»¥å¼•å…¥ä¸‰çº§ç¼“å­˜ï¼Œå¹¶ä¸”åœ¨ä¸‰çº§ç¼“å­˜ä¸­å­˜æ”¾ä¸€ä¸ªå¯¹è±¡çš„ObjectFactoryï¼Œç›®çš„å°±æ˜¯ï¼š"),a("strong",[t._v("å»¶è¿Ÿä»£ç†å¯¹è±¡çš„åˆ›å»º")])]),t._v(" "),a("p",[t._v("è¿™é‡Œå»¶è¿Ÿåˆ°å•¥æ—¶å€™åˆ›å»ºå‘¢ï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ç¬¬ä¸€ç§å°±æ˜¯ç¡®å®å­˜åœ¨å¾ªç¯ä¾èµ–ï¼Œé‚£ä¹ˆæ²¡åŠæ³•ï¼Œåªèƒ½åœ¨éœ€è¦çš„æ—¶å€™å°±åˆ›å»ºå‡ºæ¥ä»£ç†å¯¹è±¡ç„¶åæ”¾åˆ°äºŒçº§ç¼“å­˜ä¸­")]),t._v(" "),a("li",[t._v("ç¬¬äºŒç§å°±æ˜¯ä¸å­˜åœ¨å¾ªç¯ä¾èµ–ï¼Œé‚£å°±æ˜¯æ­£å¸¸çš„åœ¨åˆå§‹åŒ–çš„åç½®å¤„ç†å™¨ä¸­åˆ›å»ºã€‚")])]),t._v(" "),a("p",[a("mark",[t._v("å› æ­¤ä¸ç›´æ¥ä½¿ç”¨ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜æ¥è§£å†³å¾ªç¯ä¾èµ–çš„åŸå› å°±æ˜¯ï¼šå¸Œæœ›åœ¨ä¸å­˜åœ¨å¾ªç¯ä¾èµ–çš„æƒ…å†µä¸‹ä¸ç ´åSpringå¯¹AOPçš„è®¾è®¡åŸåˆ™ã€‚")])])])}),[],!1,null,null,null);a.default=e.exports}}]);